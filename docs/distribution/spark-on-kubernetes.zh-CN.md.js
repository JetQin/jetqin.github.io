webpackJsonp([27],{1307:function(s,a){s.exports={content:["article",["h2","Deploy Spark Operator"],["pre",{lang:null,highlighted:'kubectl apply <span class="token operator">-</span>f manifest<span class="token operator">/</span>operator<span class="token punctuation">.</span>yaml\nserviceaccount<span class="token operator">/</span>spark<span class="token operator">-</span>operator created\nclusterrolebinding<span class="token punctuation">.</span>rbac<span class="token punctuation">.</span>authorization<span class="token punctuation">.</span>k8s<span class="token punctuation">.</span>io<span class="token operator">/</span>spark<span class="token operator">-</span>operator<span class="token operator">-</span>edit<span class="token operator">-</span>resources created\ndeployment<span class="token punctuation">.</span>apps<span class="token operator">/</span>spark<span class="token operator">-</span>operator created'},["code","kubectl apply -f manifest/operator.yaml\nserviceaccount/spark-operator created\nclusterrolebinding.rbac.authorization.k8s.io/spark-operator-edit-resources created\ndeployment.apps/spark-operator created"]],["h2","Deploy Spark Cluster"],["pre",{lang:null,highlighted:'kubectl apply <span class="token operator">-</span>f examples<span class="token operator">/</span>cluster<span class="token punctuation">.</span>yaml\nsparkcluster<span class="token punctuation">.</span>radanalytics<span class="token punctuation">.</span>io<span class="token operator">/</span>my<span class="token operator">-</span>spark<span class="token operator">-</span>cluster created\nkubectl get svc\nNAME                     TYPE        CLUSTER<span class="token operator">-</span>IP      EXTERNAL<span class="token operator">-</span>IP   <span class="token function">PORT</span><span class="token punctuation">(</span>S<span class="token punctuation">)</span>            AGE\nkubernetes               ClusterIP   <span class="token number">10.96</span><span class="token punctuation">.</span><span class="token number">0.1</span>       <span class="token operator">&lt;</span>none<span class="token operator">></span>        <span class="token number">443</span><span class="token operator">/</span>TCP            38d\nmy<span class="token operator">-</span>spark<span class="token operator">-</span>cluster         ClusterIP   <span class="token number">10.96</span><span class="token punctuation">.</span><span class="token number">209.150</span>   <span class="token operator">&lt;</span>none<span class="token operator">></span>        <span class="token number">7077</span><span class="token operator">/</span>TCP           6m53s\nmy<span class="token operator">-</span>spark<span class="token operator">-</span>cluster<span class="token operator">-</span>ui      ClusterIP   <span class="token number">10.96</span><span class="token punctuation">.</span><span class="token number">76.184</span>    <span class="token operator">&lt;</span>none<span class="token operator">></span>        <span class="token number">8080</span><span class="token operator">/</span>TCP           6m53s\nspark<span class="token operator">-</span>operator<span class="token operator">-</span>metrics   ClusterIP   <span class="token number">10.96</span><span class="token punctuation">.</span><span class="token number">74.178</span>    <span class="token operator">&lt;</span>none<span class="token operator">></span>        <span class="token number">8080</span><span class="token operator">/</span>TCP           8m17s\nzeppelin<span class="token operator">-</span>server          ClusterIP   <span class="token number">10.96</span><span class="token punctuation">.</span><span class="token number">183.86</span>    <span class="token operator">&lt;</span>none<span class="token operator">></span>        <span class="token number">80</span><span class="token operator">/</span>TCP<span class="token punctuation">,</span><span class="token number">12320</span><span class="token operator">/</span>TCP   23h\n\nminikube service my<span class="token operator">-</span>spark<span class="token operator">-</span>cluster<span class="token operator">-</span>ui\n|<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>|<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>|<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>|<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>|\n| NAMESPACE |        NAME         | TARGET PORT |     URL      |\n|<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>|<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>|<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>|<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>|\n| <span class="token keyword">default</span>   | my<span class="token operator">-</span>spark<span class="token operator">-</span>cluster<span class="token operator">-</span>ui |             | No node port |\n|<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>|<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>|<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>|<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>|\n\ud83d\ude3f  service <span class="token keyword">default</span><span class="token operator">/</span>my<span class="token operator">-</span>spark<span class="token operator">-</span>cluster<span class="token operator">-</span>ui has no node port'},["code","kubectl apply -f examples/cluster.yaml\nsparkcluster.radanalytics.io/my-spark-cluster created\nkubectl get svc\nNAME                     TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)            AGE\nkubernetes               ClusterIP   10.96.0.1       <none>        443/TCP            38d\nmy-spark-cluster         ClusterIP   10.96.209.150   <none>        7077/TCP           6m53s\nmy-spark-cluster-ui      ClusterIP   10.96.76.184    <none>        8080/TCP           6m53s\nspark-operator-metrics   ClusterIP   10.96.74.178    <none>        8080/TCP           8m17s\nzeppelin-server          ClusterIP   10.96.183.86    <none>        80/TCP,12320/TCP   23h\n\nminikube service my-spark-cluster-ui\n|-----------|---------------------|-------------|--------------|\n| NAMESPACE |        NAME         | TARGET PORT |     URL      |\n|-----------|---------------------|-------------|--------------|\n| default   | my-spark-cluster-ui |             | No node port |\n|-----------|---------------------|-------------|--------------|\n\ud83d\ude3f  service default/my-spark-cluster-ui has no node port"]],["h2","Expose Port"],["pre",{lang:null,highlighted:'kubectl get rc\nNAME                 DESIRED   CURRENT   READY   AGE\nmy<span class="token operator">-</span>spark<span class="token operator">-</span>cluster<span class="token operator">-</span>m   <span class="token number">1</span>         <span class="token number">1</span>         <span class="token number">1</span>       11m\nmy<span class="token operator">-</span>spark<span class="token operator">-</span>cluster<span class="token operator">-</span>w   <span class="token number">2</span>         <span class="token number">2</span>         <span class="token number">2</span>       11m\n\nkubectl get svc\nNAME                     TYPE        CLUSTER<span class="token operator">-</span>IP      EXTERNAL<span class="token operator">-</span>IP   <span class="token function">PORT</span><span class="token punctuation">(</span>S<span class="token punctuation">)</span>            AGE\nkubernetes               ClusterIP   <span class="token number">10.96</span><span class="token punctuation">.</span><span class="token number">0.1</span>       <span class="token operator">&lt;</span>none<span class="token operator">></span>        <span class="token number">443</span><span class="token operator">/</span>TCP            38d\nmy<span class="token operator">-</span>spark<span class="token operator">-</span>cluster         ClusterIP   <span class="token number">10.96</span><span class="token punctuation">.</span><span class="token number">209.150</span>   <span class="token operator">&lt;</span>none<span class="token operator">></span>        <span class="token number">7077</span><span class="token operator">/</span>TCP           11m\nmy<span class="token operator">-</span>spark<span class="token operator">-</span>cluster<span class="token operator">-</span>ui      ClusterIP   <span class="token number">10.96</span><span class="token punctuation">.</span><span class="token number">76.184</span>    <span class="token operator">&lt;</span>none<span class="token operator">></span>        <span class="token number">8080</span><span class="token operator">/</span>TCP           11m\nspark<span class="token operator">-</span>operator<span class="token operator">-</span>metrics   ClusterIP   <span class="token number">10.96</span><span class="token punctuation">.</span><span class="token number">74.178</span>    <span class="token operator">&lt;</span>none<span class="token operator">></span>        <span class="token number">8080</span><span class="token operator">/</span>TCP           13m\nzeppelin<span class="token operator">-</span>server          ClusterIP   <span class="token number">10.96</span><span class="token punctuation">.</span><span class="token number">183.86</span>    <span class="token operator">&lt;</span>none<span class="token operator">></span>        <span class="token number">80</span><span class="token operator">/</span>TCP<span class="token punctuation">,</span><span class="token number">12320</span><span class="token operator">/</span>TCP   23h\n\nkubectl expose rc my<span class="token operator">-</span>spark<span class="token operator">-</span>cluster<span class="token operator">-</span>m <span class="token operator">-</span><span class="token operator">-</span>type<span class="token operator">=</span>NodePort\nservice<span class="token operator">/</span>my<span class="token operator">-</span>spark<span class="token operator">-</span>cluster<span class="token operator">-</span>m exposed\nkubectl get svc\nNAME                     TYPE        CLUSTER<span class="token operator">-</span>IP      EXTERNAL<span class="token operator">-</span>IP   <span class="token function">PORT</span><span class="token punctuation">(</span>S<span class="token punctuation">)</span>                         AGE\nkubernetes               ClusterIP   <span class="token number">10.96</span><span class="token punctuation">.</span><span class="token number">0.1</span>       <span class="token operator">&lt;</span>none<span class="token operator">></span>        <span class="token number">443</span><span class="token operator">/</span>TCP                         38d\nmy<span class="token operator">-</span>spark<span class="token operator">-</span>cluster         ClusterIP   <span class="token number">10.96</span><span class="token punctuation">.</span><span class="token number">209.150</span>   <span class="token operator">&lt;</span>none<span class="token operator">></span>        <span class="token number">7077</span><span class="token operator">/</span>TCP                        13m\nmy<span class="token operator">-</span>spark<span class="token operator">-</span>cluster<span class="token operator">-</span>m       NodePort    <span class="token number">10.96</span><span class="token punctuation">.</span><span class="token number">73.206</span>    <span class="token operator">&lt;</span>none<span class="token operator">></span>        <span class="token number">7077</span><span class="token punctuation">:</span><span class="token number">31947</span><span class="token operator">/</span>TCP<span class="token punctuation">,</span><span class="token number">8080</span><span class="token punctuation">:</span><span class="token number">30471</span><span class="token operator">/</span>TCP   3s\nmy<span class="token operator">-</span>spark<span class="token operator">-</span>cluster<span class="token operator">-</span>ui      ClusterIP   <span class="token number">10.96</span><span class="token punctuation">.</span><span class="token number">76.184</span>    <span class="token operator">&lt;</span>none<span class="token operator">></span>        <span class="token number">8080</span><span class="token operator">/</span>TCP                        13m\nspark<span class="token operator">-</span>operator<span class="token operator">-</span>metrics   ClusterIP   <span class="token number">10.96</span><span class="token punctuation">.</span><span class="token number">74.178</span>    <span class="token operator">&lt;</span>none<span class="token operator">></span>        <span class="token number">8080</span><span class="token operator">/</span>TCP                        14m\nzeppelin<span class="token operator">-</span>server          ClusterIP   <span class="token number">10.96</span><span class="token punctuation">.</span><span class="token number">183.86</span>    <span class="token operator">&lt;</span>none<span class="token operator">></span>        <span class="token number">80</span><span class="token operator">/</span>TCP<span class="token punctuation">,</span><span class="token number">12320</span><span class="token operator">/</span>TCP                23h'},["code","kubectl get rc\nNAME                 DESIRED   CURRENT   READY   AGE\nmy-spark-cluster-m   1         1         1       11m\nmy-spark-cluster-w   2         2         2       11m\n\nkubectl get svc\nNAME                     TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)            AGE\nkubernetes               ClusterIP   10.96.0.1       <none>        443/TCP            38d\nmy-spark-cluster         ClusterIP   10.96.209.150   <none>        7077/TCP           11m\nmy-spark-cluster-ui      ClusterIP   10.96.76.184    <none>        8080/TCP           11m\nspark-operator-metrics   ClusterIP   10.96.74.178    <none>        8080/TCP           13m\nzeppelin-server          ClusterIP   10.96.183.86    <none>        80/TCP,12320/TCP   23h\n\nkubectl expose rc my-spark-cluster-m --type=NodePort\nservice/my-spark-cluster-m exposed\nkubectl get svc\nNAME                     TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)                         AGE\nkubernetes               ClusterIP   10.96.0.1       <none>        443/TCP                         38d\nmy-spark-cluster         ClusterIP   10.96.209.150   <none>        7077/TCP                        13m\nmy-spark-cluster-m       NodePort    10.96.73.206    <none>        7077:31947/TCP,8080:30471/TCP   3s\nmy-spark-cluster-ui      ClusterIP   10.96.76.184    <none>        8080/TCP                        13m\nspark-operator-metrics   ClusterIP   10.96.74.178    <none>        8080/TCP                        14m\nzeppelin-server          ClusterIP   10.96.183.86    <none>        80/TCP,12320/TCP                23h"]],["h2","Check the service url"],["pre",{lang:null,highlighted:'minikube service my<span class="token operator">-</span>spark<span class="token operator">-</span>cluster<span class="token operator">-</span>m\n|<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>|<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>|<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>|<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>|\n| NAMESPACE |        NAME        | TARGET PORT  |              URL               |\n|<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>|<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>|<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>|<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>|\n| <span class="token keyword">default</span>   | my<span class="token operator">-</span>spark<span class="token operator">-</span>cluster<span class="token operator">-</span>m | port<span class="token operator">-</span><span class="token number">1</span>       | http<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">192.168</span><span class="token punctuation">.</span><span class="token number">64.5</span><span class="token punctuation">:</span><span class="token number">31947</span>      |\n|           |                    | port<span class="token operator">-</span><span class="token number">2</span>       | http<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">192.168</span><span class="token punctuation">.</span><span class="token number">64.5</span><span class="token punctuation">:</span><span class="token number">30471</span>      |\n|<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>|<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>|<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>|<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>|\n\ud83c\udf89  Opening service <span class="token keyword">default</span><span class="token operator">/</span>my<span class="token operator">-</span>spark<span class="token operator">-</span>cluster<span class="token operator">-</span>m <span class="token keyword">in</span> <span class="token keyword">default</span> browser<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>\n\ud83c\udf89  Opening service <span class="token keyword">default</span><span class="token operator">/</span>my<span class="token operator">-</span>spark<span class="token operator">-</span>cluster<span class="token operator">-</span>m <span class="token keyword">in</span> <span class="token keyword">default</span> browser<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>'},["code","minikube service my-spark-cluster-m\n|-----------|--------------------|--------------|--------------------------------|\n| NAMESPACE |        NAME        | TARGET PORT  |              URL               |\n|-----------|--------------------|--------------|--------------------------------|\n| default   | my-spark-cluster-m | port-1       | http://192.168.64.5:31947      |\n|           |                    | port-2       | http://192.168.64.5:30471      |\n|-----------|--------------------|--------------|--------------------------------|\n\ud83c\udf89  Opening service default/my-spark-cluster-m in default browser...\n\ud83c\udf89  Opening service default/my-spark-cluster-m in default browser..."]],["p",["img",{title:null,src:"./assets/spark-kube.png",alt:"Spark Kubernetes"}]],["h2","validate the spark deploy"],["pre",{lang:null,highlighted:'<span class="token variable">$SPARK_HOME</span><span class="token operator">/</span>bin<span class="token operator">/</span>spark<span class="token operator">-</span>shell <span class="token operator">-</span><span class="token operator">-</span>master<span class="token operator">=</span>spark<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">192.168</span><span class="token punctuation">.</span><span class="token number">64.5</span><span class="token punctuation">:</span><span class="token number">31947</span>\n<span class="token number">20</span><span class="token operator">/</span><span class="token number">03</span><span class="token operator">/</span><span class="token number">05</span> <span class="token number">01</span><span class="token punctuation">:</span><span class="token number">13</span><span class="token punctuation">:</span><span class="token number">52</span> WARN NativeCodeLoader<span class="token punctuation">:</span> Unable <span class="token keyword">to</span> load native<span class="token operator">-</span>hadoop library <span class="token keyword">for</span> your platform<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> using builtin<span class="token operator">-</span>java classes where applicable\nSetting <span class="token keyword">default</span> log level <span class="token keyword">to</span> <span class="token string">"WARN"</span><span class="token punctuation">.</span>\n<span class="token keyword">To</span> adjust logging level use sc<span class="token punctuation">.</span><span class="token function">setLogLevel</span><span class="token punctuation">(</span>newLevel<span class="token punctuation">)</span><span class="token punctuation">.</span> <span class="token keyword">For</span> SparkR<span class="token punctuation">,</span> use <span class="token function">setLogLevel</span><span class="token punctuation">(</span>newLevel<span class="token punctuation">)</span><span class="token punctuation">.</span>\nSpark context Web UI available at http<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">192.168</span><span class="token punctuation">.</span><span class="token number">31.25</span><span class="token punctuation">:</span><span class="token number">4040</span>\nSpark context available as <span class="token string">\'sc\'</span> <span class="token punctuation">(</span>master <span class="token operator">=</span> spark<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">192.168</span><span class="token punctuation">.</span><span class="token number">64.5</span><span class="token punctuation">:</span><span class="token number">31947</span><span class="token punctuation">,</span> app id <span class="token operator">=</span> app<span class="token operator">-</span><span class="token number">20200304171357</span><span class="token operator">-</span><span class="token number">0001</span><span class="token punctuation">)</span><span class="token punctuation">.</span>\nSpark session available as <span class="token string">\'spark\'</span><span class="token punctuation">.</span>\nWelcome <span class="token keyword">to</span>\n      ____              __\n     <span class="token operator">/</span> __<span class="token operator">/</span>__  ___ _____<span class="token operator">/</span> <span class="token operator">/</span>__\n    _\\ \\<span class="token operator">/</span> _ \\<span class="token operator">/</span> _ `<span class="token operator">/</span> __<span class="token operator">/</span>  \'_<span class="token operator">/</span>\n   <span class="token operator">/</span>___<span class="token operator">/</span> <span class="token punctuation">.</span>__<span class="token operator">/</span>\\_<span class="token punctuation">,</span>_<span class="token operator">/</span>_<span class="token operator">/</span> <span class="token operator">/</span>_<span class="token operator">/</span>\\_\\   version <span class="token number">2.4</span><span class="token punctuation">.</span><span class="token number">5</span>\n      <span class="token operator">/</span>_<span class="token operator">/</span>\n\nUsing Scala version <span class="token number">2.11</span><span class="token punctuation">.</span><span class="token number">12</span> <span class="token punctuation">(</span>Java <span class="token function">HotSpot</span><span class="token punctuation">(</span>TM<span class="token punctuation">)</span> <span class="token number">64</span><span class="token operator">-</span>Bit Server VM<span class="token punctuation">,</span> Java <span class="token number">1.8</span><span class="token punctuation">.</span>0_231<span class="token punctuation">)</span>\nType <span class="token keyword">in</span> expressions <span class="token keyword">to</span> have them evaluated<span class="token punctuation">.</span>\nType <span class="token punctuation">:</span>help <span class="token keyword">for</span> more information<span class="token punctuation">.</span>\n\nscala<span class="token operator">></span> <span class="token number">1</span><span class="token operator">+</span><span class="token number">1</span>\nres0<span class="token punctuation">:</span> Int <span class="token operator">=</span> <span class="token number">2</span>'},["code","$SPARK_HOME/bin/spark-shell --master=spark://192.168.64.5:31947\n20/03/05 01:13:52 WARN NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable\nSetting default log level to \"WARN\".\nTo adjust logging level use sc.setLogLevel(newLevel). For SparkR, use setLogLevel(newLevel).\nSpark context Web UI available at http://192.168.31.25:4040\nSpark context available as 'sc' (master = spark://192.168.64.5:31947, app id = app-20200304171357-0001).\nSpark session available as 'spark'.\nWelcome to\n      ____              __\n     / __/__  ___ _____/ /__\n    _\\ \\/ _ \\/ _ `/ __/  '_/\n   /___/ .__/\\_,_/_/ /_/\\_\\   version 2.4.5\n      /_/\n\nUsing Scala version 2.11.12 (Java HotSpot(TM) 64-Bit Server VM, Java 1.8.0_231)\nType in expressions to have them evaluated.\nType :help for more information.\n\nscala> 1+1\nres0: Int = 2"]],["h4","validate results:"],["p",["img",{title:null,src:"./assets/spark-result.png",alt:"validate result"}]],["h2","Detail config"],["p",["code","opearator.yaml"]],["pre",{lang:null,highlighted:'# <span class="token keyword">for</span> creating these resources it requires the user <span class="token keyword">to</span> be logged <span class="token keyword">in</span> as system admin\napiVersion<span class="token punctuation">:</span> v1\nkind<span class="token punctuation">:</span> ServiceAccount\nmetadata<span class="token punctuation">:</span>\n  name<span class="token punctuation">:</span> spark<span class="token operator">-</span>operator\n<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>\napiVersion<span class="token punctuation">:</span> rbac<span class="token punctuation">.</span>authorization<span class="token punctuation">.</span>k8s<span class="token punctuation">.</span>io<span class="token operator">/</span>v1beta1\nkind<span class="token punctuation">:</span> ClusterRoleBinding\nmetadata<span class="token punctuation">:</span>\n  name<span class="token punctuation">:</span> spark<span class="token operator">-</span>operator<span class="token operator">-</span>edit<span class="token operator">-</span>resources\nroleRef<span class="token punctuation">:</span>\n  kind<span class="token punctuation">:</span> ClusterRole\n  name<span class="token punctuation">:</span> cluster<span class="token operator">-</span>admin\n  apiGroup<span class="token punctuation">:</span> <span class="token string">""</span>\nsubjects<span class="token punctuation">:</span>\n  <span class="token operator">-</span> kind<span class="token punctuation">:</span> ServiceAccount\n    name<span class="token punctuation">:</span> spark<span class="token operator">-</span>operator\n    namespace<span class="token punctuation">:</span> <span class="token keyword">default</span>\n<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>\napiVersion<span class="token punctuation">:</span> apps<span class="token operator">/</span>v1\nkind<span class="token punctuation">:</span> Deployment\nmetadata<span class="token punctuation">:</span>\n  name<span class="token punctuation">:</span> spark<span class="token operator">-</span>operator\n  labels<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">default</span><span class="token operator">-</span>labels\n    app<span class="token punctuation">.</span>kubernetes<span class="token punctuation">.</span>io<span class="token operator">/</span>name<span class="token punctuation">:</span> spark<span class="token operator">-</span>operator\n    app<span class="token punctuation">.</span>kubernetes<span class="token punctuation">.</span>io<span class="token operator">/</span>version<span class="token punctuation">:</span> v1<span class="token punctuation">.</span><span class="token number">0.3</span><span class="token operator">-</span>v1alpha1\nspec<span class="token punctuation">:</span>\n  replicas<span class="token punctuation">:</span> <span class="token number">1</span>\n  selector<span class="token punctuation">:</span>\n    matchLabels<span class="token punctuation">:</span> <span class="token operator">*</span><span class="token keyword">default</span><span class="token operator">-</span>labels\n  strategy<span class="token punctuation">:</span>\n    type<span class="token punctuation">:</span> Recreate\n  template<span class="token punctuation">:</span>\n    metadata<span class="token punctuation">:</span>\n      labels<span class="token punctuation">:</span> <span class="token operator">*</span><span class="token keyword">default</span><span class="token operator">-</span>labels\n    spec<span class="token punctuation">:</span>\n      serviceAccountName<span class="token punctuation">:</span> spark<span class="token operator">-</span>operator\n      containers<span class="token punctuation">:</span>\n      <span class="token operator">-</span> name<span class="token punctuation">:</span> spark<span class="token operator">-</span>operator\n        image<span class="token punctuation">:</span> quay<span class="token punctuation">.</span>io<span class="token operator">/</span>radanalyticsio<span class="token operator">/</span>spark<span class="token operator">-</span>operator<span class="token punctuation">:</span>latest<span class="token operator">-</span>released\n        env<span class="token punctuation">:</span>\n        <span class="token operator">-</span> name<span class="token punctuation">:</span> WATCH_NAMESPACE # <span class="token keyword">if</span> <span class="token operator">not</span> specified all the namespaces will be watched<span class="token comment" spellcheck="true">; ~ denotes the same ns as the operator\'s</span>\n          value<span class="token punctuation">:</span> <span class="token string">"~"</span>\n        resources<span class="token punctuation">:</span>\n          requests<span class="token punctuation">:</span>\n            memory<span class="token punctuation">:</span> <span class="token string">"512Mi"</span>\n            cpu<span class="token punctuation">:</span> <span class="token string">"250m"</span>\n          limits<span class="token punctuation">:</span>\n            memory<span class="token punctuation">:</span> <span class="token string">"512Mi"</span>\n            cpu<span class="token punctuation">:</span> <span class="token string">"1000m"</span>\n        imagePullPolicy<span class="token punctuation">:</span> Always'},["code",'# for creating these resources it requires the user to be logged in as system admin\napiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: spark-operator\n---\napiVersion: rbac.authorization.k8s.io/v1beta1\nkind: ClusterRoleBinding\nmetadata:\n  name: spark-operator-edit-resources\nroleRef:\n  kind: ClusterRole\n  name: cluster-admin\n  apiGroup: ""\nsubjects:\n  - kind: ServiceAccount\n    name: spark-operator\n    namespace: default\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: spark-operator\n  labels: &default-labels\n    app.kubernetes.io/name: spark-operator\n    app.kubernetes.io/version: v1.0.3-v1alpha1\nspec:\n  replicas: 1\n  selector:\n    matchLabels: *default-labels\n  strategy:\n    type: Recreate\n  template:\n    metadata:\n      labels: *default-labels\n    spec:\n      serviceAccountName: spark-operator\n      containers:\n      - name: spark-operator\n        image: quay.io/radanalyticsio/spark-operator:latest-released\n        env:\n        - name: WATCH_NAMESPACE # if not specified all the namespaces will be watched; ~ denotes the same ns as the operator\'s\n          value: "~"\n        resources:\n          requests:\n            memory: "512Mi"\n            cpu: "250m"\n          limits:\n            memory: "512Mi"\n            cpu: "1000m"\n        imagePullPolicy: Always']],["p",["code","cluster.yaml"]],["pre",{lang:null,highlighted:'apiVersion<span class="token punctuation">:</span> radanalytics<span class="token punctuation">.</span>io<span class="token operator">/</span>v1\nkind<span class="token punctuation">:</span> SparkCluster\nmetadata<span class="token punctuation">:</span>\n  name<span class="token punctuation">:</span> my<span class="token operator">-</span>spark<span class="token operator">-</span>cluster\nspec<span class="token punctuation">:</span>\n  worker<span class="token punctuation">:</span>\n    instances<span class="token punctuation">:</span> <span class="token string">"2"</span>\n  master<span class="token punctuation">:</span>\n    instances<span class="token punctuation">:</span> <span class="token string">"1"</span>'},["code",'apiVersion: radanalytics.io/v1\nkind: SparkCluster\nmetadata:\n  name: my-spark-cluster\nspec:\n  worker:\n    instances: "2"\n  master:\n    instances: "1"']]],meta:{order:10,title:"Spark Deploy on Kubernetes",type:"\u5165\u95e8",filename:"docs/distribution/spark-on-kubernetes.zh-CN.md"},toc:["ul",["li",["a",{className:"bisheng-toc-h2",href:"#Deploy-Spark-Operator",title:"Deploy Spark Operator"},"Deploy Spark Operator"]],["li",["a",{className:"bisheng-toc-h2",href:"#Deploy-Spark-Cluster",title:"Deploy Spark Cluster"},"Deploy Spark Cluster"]],["li",["a",{className:"bisheng-toc-h2",href:"#Expose-Port",title:"Expose Port"},"Expose Port"]],["li",["a",{className:"bisheng-toc-h2",href:"#Check-the-service-url",title:"Check the service url"},"Check the service url"]],["li",["a",{className:"bisheng-toc-h2",href:"#validate-the-spark-deploy",title:"validate the spark deploy"},"validate the spark deploy"]],["li",["a",{className:"bisheng-toc-h2",href:"#Detail-config",title:"Detail config"},"Detail config"]]]}}});