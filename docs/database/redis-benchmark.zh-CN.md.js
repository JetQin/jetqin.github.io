webpackJsonp([30],{1288:function(s,a){s.exports={content:["article",["p","Locust \u662f\u4e00\u4e2a\u8f7b\u91cf\u5316\u7684\u538b\u529b\u6d4b\u8bd5\u5de5\u5177\uff0c\u53ef\u4ee5\u7528\u6765\u5bf9",["code","API"],"\u505a\u7b80\u5355\u7684\u538b\u529b\u6d4b\u8bd5\uff0c\u5e76\u63d0\u4f9b\u754c\u9762\u5c55\u793a\u54cd\u5e94\u65f6\u95f4\uff0c\u5e73\u5747\u8bf7\u6c42\u65f6\u95f4\u7b49\u76f8\u5173\u4fe1\u606f"],["h2","\u5b89\u88c5",["code","locust"]],["p","\u5177\u4f53\u76f8\u5173\u6587\u6863\u53ef\u4ee5\u67e5\u770b ",["a",{title:null,href:"https://docs.locust.io/en/latest/installation.html"},"locust"]],["pre",{lang:null,highlighted:'python3 <span class="token operator">-</span>m pip install locustio'},["code","python3 -m pip install locustio"]],["h2","\u7f16\u5199\u6d4b\u8bd5\u7528\u4f8b"],["pre",{lang:null,highlighted:'# execute script <span class="token keyword">to</span> finish benchmark test\n# locust <span class="token operator">-</span>f benchmark<span class="token punctuation">.</span>py <span class="token operator">-</span><span class="token operator">-</span>host<span class="token operator">=</span>http<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token punctuation">:</span><span class="token number">8000</span>\n#\n\nfrom locust import HttpLocust<span class="token punctuation">,</span> TaskSet<span class="token punctuation">,</span> task\n\n\nclass <span class="token function">UserBehavior</span><span class="token punctuation">(</span>TaskSet<span class="token punctuation">)</span><span class="token punctuation">:</span>\n    def <span class="token function">on_start</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>\n        <span class="token string">""" on_start is called when a Locust start before any task is scheduled """</span>\n        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">\'start benchmark test\'</span><span class="token punctuation">)</span>\n\n    def <span class="token function">on_stop</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>\n        <span class="token string">""" on_stop is called when the TaskSet is stopping """</span>\n        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">\'end benchmark test\'</span><span class="token punctuation">)</span>\n\n    @<span class="token function">task</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>\n    def <span class="token function">profile</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>\n        self<span class="token punctuation">.</span>client<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span>method<span class="token operator">=</span><span class="token string">"POST"</span><span class="token punctuation">,</span> url<span class="token operator">=</span><span class="token string">"/company/get"</span><span class="token punctuation">,</span> headers<span class="token operator">=</span>{<span class="token string">"Content-Type"</span><span class="token punctuation">:</span> <span class="token string">"application/x-www-form-urlencoded"</span>}<span class="token punctuation">,</span> data<span class="token operator">=</span>{<span class="token string">"code"</span><span class="token punctuation">:</span><span class="token string">"300049.SZ"</span>}<span class="token punctuation">)</span>\n\n\nclass <span class="token function">WebsiteUser</span><span class="token punctuation">(</span>HttpLocust<span class="token punctuation">)</span><span class="token punctuation">:</span>\n    task_set <span class="token operator">=</span> UserBehavior\n    min_wait <span class="token operator">=</span> <span class="token number">5000</span>\n    max_wait <span class="token operator">=</span> <span class="token number">9000</span>'},["code",'# execute script to finish benchmark test\n# locust -f benchmark.py --host=http://localhost:8000\n#\n\nfrom locust import HttpLocust, TaskSet, task\n\n\nclass UserBehavior(TaskSet):\n    def on_start(self):\n        """ on_start is called when a Locust start before any task is scheduled """\n        print(\'start benchmark test\')\n\n    def on_stop(self):\n        """ on_stop is called when the TaskSet is stopping """\n        print(\'end benchmark test\')\n\n    @task(1)\n    def profile(self):\n        self.client.request(method="POST", url="/company/get", headers={"Content-Type": "application/x-www-form-urlencoded"}, data={"code":"300049.SZ"})\n\n\nclass WebsiteUser(HttpLocust):\n    task_set = UserBehavior\n    min_wait = 5000\n    max_wait = 9000']],["h2","\u6d4b\u8bd5\u7ed3\u679c"],["p","\u5728\u6d4b\u8bd5\u811a\u672c\u76ee\u5f55\u4e0b\u6267\u884c\u5982\u4e0b\u811a\u672c\u53ef\u4ee5\u542f\u52a8",["code","locust dashboard"],", \u9700\u8981\u6307\u5b9a\u811a\u672c\u548c\u6d4b\u8bd5\u670d\u52a1\u5668"],["pre",{lang:null,highlighted:'locust <span class="token operator">-</span>f benchmark<span class="token punctuation">.</span>py <span class="token operator">-</span><span class="token operator">-</span>host<span class="token operator">=</span>http<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token punctuation">:</span><span class="token number">8000</span>'},["code","locust -f benchmark.py --host=http://localhost:8000"]],["pre",{lang:null,highlighted:' Name                                                          # reqs      # fails     Avg     Min     Max  |  Median   req<span class="token operator">/</span>s\n<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>\n POST <span class="token operator">/</span>company<span class="token operator">/</span>get                                              <span class="token number">72371</span>     <span class="token function">0</span><span class="token punctuation">(</span><span class="token number">0.00</span>%<span class="token punctuation">)</span>    <span class="token number">2301</span>      <span class="token number">25</span>   <span class="token number">18460</span>  |    <span class="token number">1500</span>  <span class="token number">189.80</span>\n<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>\n Total                                                          <span class="token number">72371</span>     <span class="token function">0</span><span class="token punctuation">(</span><span class="token number">0.00</span>%<span class="token punctuation">)</span>                                     <span class="token number">189.80</span>\n\nPercentage of the requests completed within given times\n Name                                                           # reqs    <span class="token number">50</span>%    <span class="token number">66</span>%    <span class="token number">75</span>%    <span class="token number">80</span>%    <span class="token number">90</span>%    <span class="token number">95</span>%    <span class="token number">98</span>%    <span class="token number">99</span>%   <span class="token number">100</span>%\n<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>\n POST <span class="token operator">/</span>company<span class="token operator">/</span>get                                               <span class="token number">72371</span>   <span class="token number">1500</span>   <span class="token number">2300</span>   <span class="token number">3200</span>   <span class="token number">3900</span>   <span class="token number">5800</span>   <span class="token number">7500</span>   <span class="token number">9100</span>  <span class="token number">11000</span>  <span class="token number">18000</span>\n<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>\n Total                                                           <span class="token number">72371</span>   <span class="token number">1500</span>   <span class="token number">2300</span>   <span class="token number">3200</span>   <span class="token number">3900</span>   <span class="token number">5800</span>   <span class="token number">7500</span>   <span class="token number">9100</span>  <span class="token number">11000</span>  <span class="token number">18000</span>'},["code"," Name                                                          # reqs      # fails     Avg     Min     Max  |  Median   req/s\n--------------------------------------------------------------------------------------------------------------------------------------------\n POST /company/get                                              72371     0(0.00%)    2301      25   18460  |    1500  189.80\n--------------------------------------------------------------------------------------------------------------------------------------------\n Total                                                          72371     0(0.00%)                                     189.80\n\nPercentage of the requests completed within given times\n Name                                                           # reqs    50%    66%    75%    80%    90%    95%    98%    99%   100%\n--------------------------------------------------------------------------------------------------------------------------------------------\n POST /company/get                                               72371   1500   2300   3200   3900   5800   7500   9100  11000  18000\n--------------------------------------------------------------------------------------------------------------------------------------------\n Total                                                           72371   1500   2300   3200   3900   5800   7500   9100  11000  18000"]],["p",["strong","\u5e73\u5747\u6bcf\u79d2\u5e76\u53d1\u8bf7\u6c42\u6570"]],["p",["img",{title:null,src:"./assets/locust-test.png",alt:"concurrent request"}]],["p",["strong","\u5e73\u5747\u54cd\u5e94\u65f6\u95f4"]],["p",["img",{title:null,src:"./assets/locust-response.png",alt:"response time"}]]],meta:{order:5,title:"Redis \u538b\u529b\u6d4b\u8bd5",type:"\u5165\u95e8",filename:"docs/database/redis-benchmark.zh-CN.md"},toc:["ul",["li",["a",{className:"bisheng-toc-h2",href:"#\u5b89\u88c5locust",title:"\u5b89\u88c5locust"},"\u5b89\u88c5",["code","locust"]]],["li",["a",{className:"bisheng-toc-h2",href:"#\u7f16\u5199\u6d4b\u8bd5\u7528\u4f8b",title:"\u7f16\u5199\u6d4b\u8bd5\u7528\u4f8b"},"\u7f16\u5199\u6d4b\u8bd5\u7528\u4f8b"]],["li",["a",{className:"bisheng-toc-h2",href:"#\u6d4b\u8bd5\u7ed3\u679c",title:"\u6d4b\u8bd5\u7ed3\u679c"},"\u6d4b\u8bd5\u7ed3\u679c"]]]}}});