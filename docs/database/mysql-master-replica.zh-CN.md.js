webpackJsonp([49],{1288:function(n,s){n.exports={content:["article",["h3","MySQL \u4e3b\u4ece\u540c\u6b65"],["p","MySQL \u4e3b\u4ece\u540c\u6b65\u662fMySQL\u9ad8\u53ef\u7528\u7684\u4e00\u79cd\u65b9\u5f0f\uff0c\u4e3b\u4ece\u540c\u6b65\u6700\u5c11\u4f1a\u6709\u4e24\u4e2a\u8282\u70b9\uff0c\u4e3b\u8282\u70b9\u548c\u5907\u4efd\u8282\u70b9\uff0c\u5907\u4efd\u8282\u70b9\u4f1a\u5b9a\u65f6\u540c\u6b65\u4e3b\u8282\u70b9\u4e2d\u7684\u65e5\u5fd7\u5230\u81ea\u8eab\uff0c\u6267\u884c\u4e3b\u8282\u70b9\u4e0a\u66fe\u6267\u884c\u8fc7\u7684SQL\uff0c\u8fbe\u5230\u4e3b\u8282\u70b9\u548c\u4ece\u8282\u70b9\u6570\u636e\u7684\u4e00\u81f4\uff0c\u4e3b\u8282\u70b9\u7684\u53d8\u66f4\u4f1a\u81ea\u52a8\u540c\u6b65\u5230\u4ece\u8282\u70b9\u4f46\u662f\u4ece\u8282\u70b9\u7684\u53d8\u66f4\u5374\u4e0d\u4f1a\u5f71\u54cd\u4e3b\u8282\u70b9\u7684\u6570\u636e\uff0c\u8fd9\u6837\u53ef\u4ee5\u901a\u8fc7\u4e3b\u8282\u70b9\u5199\u5165\uff0c\u4ece\u8282\u70b9\u8bfb\u53d6\u8fbe\u5230\u8bfb\u5199\u5206\u79bb\u7684\u76ee\u7684\u3002"],["h3","\u642d\u5efa\u4e3b\u4ece\u90e8\u7f72"],["ul",["li",["p","\u4f7f\u7528docker \u6a21\u62df\u591a\u4e2amysql\u5b9e\u4f8b"]]],["p","\u62c9\u53d6\u6700\u65b0\u7684mysql 8\uff0c\u4f7f\u7528mysql8 \u6765\u5b9e\u73b0\u4e3b\u4ece\u8282\u70b9\u90e8\u7f72"],["pre",{lang:null,highlighted:'jet$ docker pull mysql\nUsing <span class="token keyword">default</span> tag<span class="token punctuation">:</span> latest\nlatest<span class="token punctuation">:</span> Pulling from library<span class="token operator">/</span>mysql\nDigest<span class="token punctuation">:</span> sha256<span class="token punctuation">:</span>6e0014cdd88092545557dee5e9eb7e1a3c84c9a14ad2418d5f2231e930967a38\nStatus<span class="token punctuation">:</span> Image is up <span class="token keyword">to</span> date <span class="token keyword">for</span> mysql<span class="token punctuation">:</span>latest\ndocker<span class="token punctuation">.</span>io<span class="token operator">/</span>library<span class="token operator">/</span>mysql<span class="token punctuation">:</span>latest'},["code","jet$ docker pull mysql\nUsing default tag: latest\nlatest: Pulling from library/mysql\nDigest: sha256:6e0014cdd88092545557dee5e9eb7e1a3c84c9a14ad2418d5f2231e930967a38\nStatus: Image is up to date for mysql:latest\ndocker.io/library/mysql:latest"]],["ul",["li",["p","\u542f\u52a8\u4e3b\u8282\u70b9\n\u4e3b\u8282\u70b9\u9700\u8981\u505a\u5982\u4e0b\u914d\u7f6e\uff0c\u5e76\u5c06\u6b64\u914d\u7f6e\u6620\u5c04\u5230docker mysql image\u7684\u914d\u7f6e\u8def\u5f84\u4e0b/etc/mysql/conf.d/"]]],["pre",{lang:null,highlighted:'<span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span>\npid<span class="token operator">-</span>file        <span class="token operator">=</span> <span class="token operator">/</span>var<span class="token operator">/</span>run<span class="token operator">/</span>mysqld<span class="token operator">/</span>mysqld<span class="token punctuation">.</span>pid\nsocket          <span class="token operator">=</span> <span class="token operator">/</span>var<span class="token operator">/</span>run<span class="token operator">/</span>mysqld<span class="token operator">/</span>mysqld<span class="token punctuation">.</span>sock\nport            <span class="token operator">=</span> <span class="token number">3306</span>\ndatadir         <span class="token operator">=</span> <span class="token operator">/</span>var<span class="token operator">/</span>lib<span class="token operator">/</span>mysql\ntmpdir          <span class="token operator">=</span> <span class="token operator">/</span>tmp\nrelay<span class="token operator">-</span>log       <span class="token operator">=</span> slave<span class="token operator">-</span>relay<span class="token operator">-</span>bin\nrelay<span class="token operator">-</span>log<span class="token operator">-</span>index <span class="token operator">=</span> slave<span class="token operator">-</span>relay<span class="token operator">-</span>bin<span class="token punctuation">.</span>index\nserver<span class="token operator">-</span>id       <span class="token operator">=</span> <span class="token number">2</span>'},["code","[mysqld]\npid-file        = /var/run/mysqld/mysqld.pid\nsocket          = /var/run/mysqld/mysqld.sock\nport            = 3306\ndatadir         = /var/lib/mysql\ntmpdir          = /tmp\nrelay-log       = slave-relay-bin\nrelay-log-index = slave-relay-bin.index\nserver-id       = 2"]],["p","\u542f\u52a8mysql-master"],["pre",{lang:null,highlighted:'docker run <span class="token operator">-</span>d <span class="token operator">-</span><span class="token operator">-</span>name mysql<span class="token operator">-</span>master <span class="token operator">-</span>e MYSQL_ROOT_PASSWORD<span class="token operator">=</span><span class="token string">\'masterpassword\'</span> <span class="token operator">-</span>p <span class="token number">127.0</span><span class="token punctuation">.</span><span class="token number">0.1</span><span class="token punctuation">:</span><span class="token number">13306</span><span class="token punctuation">:</span><span class="token number">3306</span> <span class="token operator">-</span>v <span class="token operator">/</span>Users<span class="token operator">/</span>jet<span class="token operator">/</span>kubernetes<span class="token operator">/</span>mysql<span class="token operator">/</span>master<span class="token operator">/</span><span class="token punctuation">:</span><span class="token operator">/</span>etc<span class="token operator">/</span>mysql<span class="token operator">/</span>conf<span class="token punctuation">.</span>d<span class="token operator">/</span>  mysql'},["code","docker run -d --name mysql-master -e MYSQL_ROOT_PASSWORD='masterpassword' -p 127.0.0.1:13306:3306 -v /Users/jet/kubernetes/mysql/master/:/etc/mysql/conf.d/  mysql"]],["ul",["li",["p","\u542f\u52a8\u4ece\u8282\u70b9"]]],["p","\u4ece\u8282\u70b9\u9700\u8981\u6307\u5b9aserver-id\uff0c\u4fdd\u8bc1\u548c\u4e3b\u8282\u70b9\u4f7f\u7528\u7684\u662f\u4e0d\u540c\u7684id\u9700\u8981\u4fee\u6539\u5982\u4e0b\u914d\u7f6e\u4fe1\u606f"],["pre",{lang:null,highlighted:'<span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span>\npid<span class="token operator">-</span>file        <span class="token operator">=</span> <span class="token operator">/</span>var<span class="token operator">/</span>run<span class="token operator">/</span>mysqld<span class="token operator">/</span>mysqld<span class="token punctuation">.</span>pid\nsocket          <span class="token operator">=</span> <span class="token operator">/</span>var<span class="token operator">/</span>run<span class="token operator">/</span>mysqld<span class="token operator">/</span>mysqld<span class="token punctuation">.</span>sock\nport            <span class="token operator">=</span> <span class="token number">3306</span>\ndatadir         <span class="token operator">=</span> <span class="token operator">/</span>var<span class="token operator">/</span>lib<span class="token operator">/</span>mysql\ntmpdir          <span class="token operator">=</span> <span class="token operator">/</span>tmp\nrelay<span class="token operator">-</span>log       <span class="token operator">=</span> slave<span class="token operator">-</span>relay<span class="token operator">-</span>bin\nrelay<span class="token operator">-</span>log<span class="token operator">-</span>index <span class="token operator">=</span> slave<span class="token operator">-</span>relay<span class="token operator">-</span>bin<span class="token punctuation">.</span>index\nserver<span class="token operator">-</span>id       <span class="token operator">=</span> <span class="token number">2</span>'},["code","[mysqld]\npid-file        = /var/run/mysqld/mysqld.pid\nsocket          = /var/run/mysqld/mysqld.sock\nport            = 3306\ndatadir         = /var/lib/mysql\ntmpdir          = /tmp\nrelay-log       = slave-relay-bin\nrelay-log-index = slave-relay-bin.index\nserver-id       = 2"]],["p","\u542f\u52a8mysql-slave"],["pre",{lang:null,highlighted:'docker run <span class="token operator">-</span>d <span class="token operator">-</span><span class="token operator">-</span>name mysql<span class="token operator">-</span>slave <span class="token operator">-</span>e MYSQL_ROOT_PASSWORD<span class="token operator">=</span><span class="token string">\'slavepassword\'</span> <span class="token operator">-</span>p <span class="token number">127.0</span><span class="token punctuation">.</span><span class="token number">0.1</span><span class="token punctuation">:</span><span class="token number">23306</span><span class="token punctuation">:</span><span class="token number">3306</span> <span class="token operator">-</span>v <span class="token operator">/</span>Users<span class="token operator">/</span>jet<span class="token operator">/</span>kubernetes<span class="token operator">/</span>mysql<span class="token operator">/</span>slave<span class="token operator">/</span><span class="token punctuation">:</span><span class="token operator">/</span>etc<span class="token operator">/</span>mysql<span class="token operator">/</span>conf<span class="token punctuation">.</span>d<span class="token operator">/</span>  mysql'},["code","docker run -d --name mysql-slave -e MYSQL_ROOT_PASSWORD='slavepassword' -p 127.0.0.1:23306:3306 -v /Users/jet/kubernetes/mysql/slave/:/etc/mysql/conf.d/  mysql"]],["p","\u67e5\u770bmysql\u5b9e\u4f8b\u8fd0\u884c\u60c5\u51b5"],["p",["img",{title:null,src:"./assets/mysql-replica.png",alt:"mysql-replica"}]],["ul",["li",["p","\u914d\u7f6emaster/replica\u8282\u70b9\u7f51\u7edc"]]],["p","\u4e3a\u4e86\u4fdd\u8bc1master\u548creplica\u8282\u70b9\u80fd\u591f\u5f7c\u6b64\u901a\u4fe1\uff0c\u6211\u4eec\u5fc5\u987b\u4fdd\u8bc1\u4ed6\u4eec\u5728\u540c\u4e00\u7f51\u7edc\u73af\u5883\u4e2d"],["p","\u521b\u5efa\u7f51\u7edcmysql-net"],["pre",{lang:null,highlighted:'docker network create mysql<span class="token operator">-</span>net\n\ndocker network connect mysql<span class="token operator">-</span>net mysql<span class="token operator">-</span>master\ndocker network connect mysql<span class="token operator">-</span>net mysql<span class="token operator">-</span>slave'},["code","docker network create mysql-net\n\ndocker network connect mysql-net mysql-master\ndocker network connect mysql-net mysql-slave"]],["p","\u67e5\u770b\u8fde\u63a5\u60c5\u51b5, \u53ef\u4ee5\u770b\u5230\u4e24\u4e2amysql\u5b9e\u4f8b\u5728\u540c\u4e00\u7f51\u6bb5\u4e2d\uff0c\u63a5\u4e0b\u6765\u68c0\u67e5\u4e24\u4e2a\u5bb9\u5668\u4e4b\u95f4\u7684\u901a\u4fe1\u60c5\u51b5\u3002 \u5982\u679c\u7f51\u7edc\u4e0d\u901a\uff0c\u53ef\u80fd\u4f1a\u6709\u5982\u4e0b\u9519\u8bef"],["pre",{lang:null,highlighted:' Last_IO_Error<span class="token punctuation">:</span> error connecting <span class="token keyword">to</span> master <span class="token string">\'repl_user@172.18.0.3:3306\'</span> <span class="token operator">-</span> retry<span class="token operator">-</span>time<span class="token punctuation">:</span> <span class="token number">60</span> retries<span class="token punctuation">:</span> <span class="token number">4</span> message<span class="token punctuation">:</span> Authentication plugin <span class="token string">\'caching_sha2_password\'</span> reported error<span class="token punctuation">:</span> Authentication requi'},["code"," Last_IO_Error: error connecting to master 'repl_user@172.18.0.3:3306' - retry-time: 60 retries: 4 message: Authentication plugin 'caching_sha2_password' reported error: Authentication requi"]],["pre",{lang:null,highlighted:'docker network inspect mysql<span class="token operator">-</span>net\n<span class="token punctuation">[</span>\n    {\n        <span class="token string">"Name"</span><span class="token punctuation">:</span> <span class="token string">"mysql-net"</span><span class="token punctuation">,</span>\n        <span class="token string">"Id"</span><span class="token punctuation">:</span> <span class="token string">"b110d091893642685cc3995044efefa96c9cca274e1a121dfce39436f6c99e1d"</span><span class="token punctuation">,</span>\n        <span class="token string">"Created"</span><span class="token punctuation">:</span> <span class="token string">"2021-04-17T16:06:56.4091663Z"</span><span class="token punctuation">,</span>\n        <span class="token string">"Scope"</span><span class="token punctuation">:</span> <span class="token string">"local"</span><span class="token punctuation">,</span>\n        <span class="token string">"Driver"</span><span class="token punctuation">:</span> <span class="token string">"bridge"</span><span class="token punctuation">,</span>\n        <span class="token string">"EnableIPv6"</span><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n        <span class="token string">"IPAM"</span><span class="token punctuation">:</span> {\n            <span class="token string">"Driver"</span><span class="token punctuation">:</span> <span class="token string">"default"</span><span class="token punctuation">,</span>\n            <span class="token string">"Options"</span><span class="token punctuation">:</span> {}<span class="token punctuation">,</span>\n            <span class="token string">"Config"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>\n                {\n                    <span class="token string">"Subnet"</span><span class="token punctuation">:</span> <span class="token string">"172.18.0.0/16"</span><span class="token punctuation">,</span>\n                    <span class="token string">"Gateway"</span><span class="token punctuation">:</span> <span class="token string">"172.18.0.1"</span>\n                }\n            <span class="token punctuation">]</span>\n        }<span class="token punctuation">,</span>\n        <span class="token string">"Internal"</span><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n        <span class="token string">"Attachable"</span><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n        <span class="token string">"Ingress"</span><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n        <span class="token string">"ConfigFrom"</span><span class="token punctuation">:</span> {\n            <span class="token string">"Network"</span><span class="token punctuation">:</span> <span class="token string">""</span>\n        }<span class="token punctuation">,</span>\n        <span class="token string">"ConfigOnly"</span><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n        <span class="token string">"Containers"</span><span class="token punctuation">:</span> {\n            <span class="token string">"3918d00c36b1fb41d306db087df2f94ad6daa4a28bc7135c8b8ff78b3bc5338f"</span><span class="token punctuation">:</span> {\n                <span class="token string">"Name"</span><span class="token punctuation">:</span> <span class="token string">"mysql-master"</span><span class="token punctuation">,</span>\n                <span class="token string">"EndpointID"</span><span class="token punctuation">:</span> <span class="token string">"f21451072a3bbff9c818dece98047d39835efc0241482378942aa52dd213c998"</span><span class="token punctuation">,</span>\n                <span class="token string">"MacAddress"</span><span class="token punctuation">:</span> <span class="token string">"02:42:ac:12:00:03"</span><span class="token punctuation">,</span>\n                <span class="token string">"IPv4Address"</span><span class="token punctuation">:</span> <span class="token string">"172.18.0.3/16"</span><span class="token punctuation">,</span>\n                <span class="token string">"IPv6Address"</span><span class="token punctuation">:</span> <span class="token string">""</span>\n            }<span class="token punctuation">,</span>\n            <span class="token string">"94a4f7fa511c8fe95320ed66ceaff42f3eb0f7c402e1f502b55566643e55fca0"</span><span class="token punctuation">:</span> {\n                <span class="token string">"Name"</span><span class="token punctuation">:</span> <span class="token string">"mysql-slave"</span><span class="token punctuation">,</span>\n                <span class="token string">"EndpointID"</span><span class="token punctuation">:</span> <span class="token string">"f873d5103d2ca0b32102267bea52b58cab717b1b795d2ee4cf4a3ea7a798feb3"</span><span class="token punctuation">,</span>\n                <span class="token string">"MacAddress"</span><span class="token punctuation">:</span> <span class="token string">"02:42:ac:12:00:02"</span><span class="token punctuation">,</span>\n                <span class="token string">"IPv4Address"</span><span class="token punctuation">:</span> <span class="token string">"172.18.0.2/16"</span><span class="token punctuation">,</span>\n                <span class="token string">"IPv6Address"</span><span class="token punctuation">:</span> <span class="token string">""</span>\n            }\n        }<span class="token punctuation">,</span>\n        <span class="token string">"Options"</span><span class="token punctuation">:</span> {}<span class="token punctuation">,</span>\n        <span class="token string">"Labels"</span><span class="token punctuation">:</span> {}\n    }\n<span class="token punctuation">]</span>'},["code",'docker network inspect mysql-net\n[\n    {\n        "Name": "mysql-net",\n        "Id": "b110d091893642685cc3995044efefa96c9cca274e1a121dfce39436f6c99e1d",\n        "Created": "2021-04-17T16:06:56.4091663Z",\n        "Scope": "local",\n        "Driver": "bridge",\n        "EnableIPv6": false,\n        "IPAM": {\n            "Driver": "default",\n            "Options": {},\n            "Config": [\n                {\n                    "Subnet": "172.18.0.0/16",\n                    "Gateway": "172.18.0.1"\n                }\n            ]\n        },\n        "Internal": false,\n        "Attachable": false,\n        "Ingress": false,\n        "ConfigFrom": {\n            "Network": ""\n        },\n        "ConfigOnly": false,\n        "Containers": {\n            "3918d00c36b1fb41d306db087df2f94ad6daa4a28bc7135c8b8ff78b3bc5338f": {\n                "Name": "mysql-master",\n                "EndpointID": "f21451072a3bbff9c818dece98047d39835efc0241482378942aa52dd213c998",\n                "MacAddress": "02:42:ac:12:00:03",\n                "IPv4Address": "172.18.0.3/16",\n                "IPv6Address": ""\n            },\n            "94a4f7fa511c8fe95320ed66ceaff42f3eb0f7c402e1f502b55566643e55fca0": {\n                "Name": "mysql-slave",\n                "EndpointID": "f873d5103d2ca0b32102267bea52b58cab717b1b795d2ee4cf4a3ea7a798feb3",\n                "MacAddress": "02:42:ac:12:00:02",\n                "IPv4Address": "172.18.0.2/16",\n                "IPv6Address": ""\n            }\n        },\n        "Options": {},\n        "Labels": {}\n    }\n]']],["p","\u4ecereplica\u8282\u70b9\u68c0\u67e5\u662f\u5426\u53ef\u4ee5ping\u901amaster\u8282\u70b9, "],["pre",{lang:null,highlighted:'docker exec <span class="token operator">-</span>it mysql<span class="token operator">-</span>slave <span class="token operator">/</span>bin<span class="token operator">/</span>bash\nroot<span class="token variable">@94a4f7fa511c</span><span class="token punctuation">:</span><span class="token operator">/</span># apt<span class="token operator">-</span>get update\nroot<span class="token variable">@94a4f7fa511c</span><span class="token punctuation">:</span><span class="token operator">/</span># apt<span class="token operator">-</span>get install iputils<span class="token operator">-</span>ping\nroot<span class="token variable">@94a4f7fa511c</span><span class="token punctuation">:</span><span class="token operator">/</span># ping <span class="token number">172.18</span><span class="token punctuation">.</span><span class="token number">0.3</span>                #\u7f51\u7edc\u6b63\u5e38\nPING <span class="token number">172.18</span><span class="token punctuation">.</span><span class="token number">0.2</span> <span class="token punctuation">(</span><span class="token number">172.18</span><span class="token punctuation">.</span><span class="token number">0.2</span><span class="token punctuation">)</span> <span class="token function">56</span><span class="token punctuation">(</span><span class="token number">84</span><span class="token punctuation">)</span> bytes of data<span class="token punctuation">.</span>\n<span class="token number">64</span> bytes from <span class="token number">172.18</span><span class="token punctuation">.</span><span class="token number">0.2</span><span class="token punctuation">:</span> icmp_seq<span class="token operator">=</span><span class="token number">1</span> ttl<span class="token operator">=</span><span class="token number">64</span> time<span class="token operator">=</span><span class="token number">0.076</span> ms\n<span class="token number">64</span> bytes from <span class="token number">172.18</span><span class="token punctuation">.</span><span class="token number">0.2</span><span class="token punctuation">:</span> icmp_seq<span class="token operator">=</span><span class="token number">2</span> ttl<span class="token operator">=</span><span class="token number">64</span> time<span class="token operator">=</span><span class="token number">0.087</span> ms\n<span class="token number">64</span> bytes from <span class="token number">172.18</span><span class="token punctuation">.</span><span class="token number">0.2</span><span class="token punctuation">:</span> icmp_seq<span class="token operator">=</span><span class="token number">3</span> ttl<span class="token operator">=</span><span class="token number">64</span> time<span class="token operator">=</span><span class="token number">0.114</span> ms'},["code","docker exec -it mysql-slave /bin/bash\nroot@94a4f7fa511c:/# apt-get update\nroot@94a4f7fa511c:/# apt-get install iputils-ping\nroot@94a4f7fa511c:/# ping 172.18.0.3                #\u7f51\u7edc\u6b63\u5e38\nPING 172.18.0.2 (172.18.0.2) 56(84) bytes of data.\n64 bytes from 172.18.0.2: icmp_seq=1 ttl=64 time=0.076 ms\n64 bytes from 172.18.0.2: icmp_seq=2 ttl=64 time=0.087 ms\n64 bytes from 172.18.0.2: icmp_seq=3 ttl=64 time=0.114 ms"]],["h3","\u767b\u5f55master\u8282\u70b9\uff0c\u521b\u5efa\u76f8\u5173\u8d26\u53f7"],["pre",{lang:null,highlighted:'create user repl_user@<span class="token string">\'%\'</span> identified by <span class="token string">\'rootpassword\'</span><span class="token comment" spellcheck="true">;</span>\ngrant replication slave on <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">to</span> repl<span class="token comment" spellcheck="true">;</span>'},["code","create user repl_user@'%' identified by 'rootpassword';\ngrant replication slave on *.* to repl;"]],["h3","\u767b\u5f55replica\u8282\u70b9\uff0c\u914d\u7f6ereplica\u8282\u70b9"],["pre",{lang:null,highlighted:'mysql<span class="token operator">></span> change master <span class="token keyword">to</span>\n    <span class="token operator">-</span><span class="token operator">></span> master_host <span class="token operator">=</span> <span class="token string">\'172.18.0.2\'</span><span class="token punctuation">,</span>\n    <span class="token operator">-</span><span class="token operator">></span> master_port <span class="token operator">=</span> <span class="token number">3306</span><span class="token punctuation">,</span>\n    <span class="token operator">-</span><span class="token operator">></span> master_user <span class="token operator">=</span> <span class="token string">\'repl_user\'</span><span class="token punctuation">,</span>\n    <span class="token operator">-</span><span class="token operator">></span> master_password <span class="token operator">=</span> <span class="token string">\'root@root\'</span><span class="token comment" spellcheck="true">;</span>\nQuery OK<span class="token punctuation">,</span> <span class="token number">0</span> rows affected<span class="token punctuation">,</span> <span class="token number">7</span> warnings <span class="token punctuation">(</span><span class="token number">0.03</span> sec<span class="token punctuation">)</span>\n\nmysql<span class="token operator">></span> start slave<span class="token comment" spellcheck="true">;</span>\n\nmysql<span class="token operator">></span> show slave status\\G<span class="token comment" spellcheck="true">;</span>\n<span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">.</span> row <span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span>\n               Slave_IO_State<span class="token punctuation">:</span> Waiting <span class="token keyword">for</span> master <span class="token keyword">to</span> send event\n                  Master_Host<span class="token punctuation">:</span> <span class="token number">172.18</span><span class="token punctuation">.</span><span class="token number">0.2</span>\n                  Master_User<span class="token punctuation">:</span> repl_user\n                  Master_Port<span class="token punctuation">:</span> <span class="token number">3306</span>\n                Connect_Retry<span class="token punctuation">:</span> <span class="token number">60</span>\n              Master_Log_File<span class="token punctuation">:</span> master<span class="token operator">-</span>bin<span class="token punctuation">.</span><span class="token number">000003</span>\n          Read_Master_Log_Pos<span class="token punctuation">:</span> <span class="token number">1075</span>\n               Relay_Log_File<span class="token punctuation">:</span> slave<span class="token operator">-</span>relay<span class="token operator">-</span>bin<span class="token punctuation">.</span><span class="token number">000004</span>\n                Relay_Log_Pos<span class="token punctuation">:</span> <span class="token number">1292</span>\n        Relay_Master_Log_File<span class="token punctuation">:</span> master<span class="token operator">-</span>bin<span class="token punctuation">.</span><span class="token number">000003</span>\n             Slave_IO_Running<span class="token punctuation">:</span> Yes\n            Slave_SQL_Running<span class="token punctuation">:</span> Yes\n              Replicate_Do_DB<span class="token punctuation">:</span>\n          Replicate_Ignore_DB<span class="token punctuation">:</span>\n           Replicate_Do_Table<span class="token punctuation">:</span>\n       Replicate_Ignore_Table<span class="token punctuation">:</span>\n      Replicate_Wild_Do_Table<span class="token punctuation">:</span>\n  Replicate_Wild_Ignore_Table<span class="token punctuation">:</span>\n                   Last_Errno<span class="token punctuation">:</span> <span class="token number">0</span>\n                   Last_Error<span class="token punctuation">:</span>\n                 Skip_Counter<span class="token punctuation">:</span> <span class="token number">0</span>\n          Exec_Master_Log_Pos<span class="token punctuation">:</span> <span class="token number">1075</span>\n              Relay_Log_Space<span class="token punctuation">:</span> <span class="token number">3120245</span>\n              Until_Condition<span class="token punctuation">:</span> None\n               Until_Log_File<span class="token punctuation">:</span>\n                Until_Log_Pos<span class="token punctuation">:</span> <span class="token number">0</span>\n           Master_SSL_Allowed<span class="token punctuation">:</span> No\n           Master_SSL_CA_File<span class="token punctuation">:</span>\n           Master_SSL_CA_Path<span class="token punctuation">:</span>\n              Master_SSL_Cert<span class="token punctuation">:</span>\n            Master_SSL_Cipher<span class="token punctuation">:</span>\n               Master_SSL_Key<span class="token punctuation">:</span>\n        Seconds_Behind_Master<span class="token punctuation">:</span> <span class="token number">0</span>\nMaster_SSL_Verify_Server_Cert<span class="token punctuation">:</span> No\n                Last_IO_Errno<span class="token punctuation">:</span> <span class="token number">0</span>\n                Last_IO_Error<span class="token punctuation">:</span>\n               Last_SQL_Errno<span class="token punctuation">:</span> <span class="token number">0</span>\n               Last_SQL_Error<span class="token punctuation">:</span>\n  Replicate_Ignore_Server_Ids<span class="token punctuation">:</span>\n             Master_Server_Id<span class="token punctuation">:</span> <span class="token number">1</span>\n                  Master_UUID<span class="token punctuation">:</span> 8acb9251<span class="token operator">-</span>a01c<span class="token operator">-</span>11eb<span class="token operator">-</span><span class="token number">8940</span><span class="token operator">-</span>0242ac110002\n             Master_Info_File<span class="token punctuation">:</span> mysql<span class="token punctuation">.</span>slave_master_info\n                    SQL_Delay<span class="token punctuation">:</span> <span class="token number">0</span>\n          SQL_Remaining_Delay<span class="token punctuation">:</span> <span class="token keyword">NULL</span>\n      Slave_SQL_Running_State<span class="token punctuation">:</span> Slave has read all relay log<span class="token comment" spellcheck="true">; waiting for more updates</span>\n           Master_Retry_Count<span class="token punctuation">:</span> <span class="token number">86400</span>\n                  Master_Bind<span class="token punctuation">:</span>\n      Last_IO_Error_Timestamp<span class="token punctuation">:</span>\n     Last_SQL_Error_Timestamp<span class="token punctuation">:</span>\n               Master_SSL_Crl<span class="token punctuation">:</span>\n           Master_SSL_Crlpath<span class="token punctuation">:</span>\n           Retrieved_Gtid_Set<span class="token punctuation">:</span>\n            Executed_Gtid_Set<span class="token punctuation">:</span>\n                Auto_Position<span class="token punctuation">:</span> <span class="token number">0</span>\n         Replicate_Rewrite_DB<span class="token punctuation">:</span>\n                 Channel_Name<span class="token punctuation">:</span>\n           Master_TLS_Version<span class="token punctuation">:</span>\n       Master_public_key_path<span class="token punctuation">:</span>\n        Get_master_public_key<span class="token punctuation">:</span> <span class="token number">0</span>\n            Network_Namespace<span class="token punctuation">:</span>\n<span class="token number">1</span> row <span class="token keyword">in</span> set<span class="token punctuation">,</span> <span class="token number">1</span> warning <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>'},["code","mysql> change master to\n    -> master_host = '172.18.0.2',\n    -> master_port = 3306,\n    -> master_user = 'repl_user',\n    -> master_password = 'root@root';\nQuery OK, 0 rows affected, 7 warnings (0.03 sec)\n\nmysql> start slave;\n\nmysql> show slave status\\G;\n*************************** 1. row ***************************\n               Slave_IO_State: Waiting for master to send event\n                  Master_Host: 172.18.0.2\n                  Master_User: repl_user\n                  Master_Port: 3306\n                Connect_Retry: 60\n              Master_Log_File: master-bin.000003\n          Read_Master_Log_Pos: 1075\n               Relay_Log_File: slave-relay-bin.000004\n                Relay_Log_Pos: 1292\n        Relay_Master_Log_File: master-bin.000003\n             Slave_IO_Running: Yes\n            Slave_SQL_Running: Yes\n              Replicate_Do_DB:\n          Replicate_Ignore_DB:\n           Replicate_Do_Table:\n       Replicate_Ignore_Table:\n      Replicate_Wild_Do_Table:\n  Replicate_Wild_Ignore_Table:\n                   Last_Errno: 0\n                   Last_Error:\n                 Skip_Counter: 0\n          Exec_Master_Log_Pos: 1075\n              Relay_Log_Space: 3120245\n              Until_Condition: None\n               Until_Log_File:\n                Until_Log_Pos: 0\n           Master_SSL_Allowed: No\n           Master_SSL_CA_File:\n           Master_SSL_CA_Path:\n              Master_SSL_Cert:\n            Master_SSL_Cipher:\n               Master_SSL_Key:\n        Seconds_Behind_Master: 0\nMaster_SSL_Verify_Server_Cert: No\n                Last_IO_Errno: 0\n                Last_IO_Error:\n               Last_SQL_Errno: 0\n               Last_SQL_Error:\n  Replicate_Ignore_Server_Ids:\n             Master_Server_Id: 1\n                  Master_UUID: 8acb9251-a01c-11eb-8940-0242ac110002\n             Master_Info_File: mysql.slave_master_info\n                    SQL_Delay: 0\n          SQL_Remaining_Delay: NULL\n      Slave_SQL_Running_State: Slave has read all relay log; waiting for more updates\n           Master_Retry_Count: 86400\n                  Master_Bind:\n      Last_IO_Error_Timestamp:\n     Last_SQL_Error_Timestamp:\n               Master_SSL_Crl:\n           Master_SSL_Crlpath:\n           Retrieved_Gtid_Set:\n            Executed_Gtid_Set:\n                Auto_Position: 0\n         Replicate_Rewrite_DB:\n                 Channel_Name:\n           Master_TLS_Version:\n       Master_public_key_path:\n        Get_master_public_key: 0\n            Network_Namespace:\n1 row in set, 1 warning (0.01 sec)"]],["p","\u6b64\u65f6mysql\u7684replica\u8282\u70b9\u5c31\u4f1a\u540c\u6b65master\u7684\u6570\u636e\u5230\u672c\u5730, \u4ece\u8282\u70b9\u5728\u7b2c\u4e8c\u6b21\u67e5\u770b\u8868\u5df2\u7ecf\u5c06master\u7684\u8868\u7ed3\u6784\u4fe1\u606f\u540c\u6b65\u5230\u4e86\u672c\u5730"],["p",["img",{title:null,src:"./assets/mysql-replica-sync.png",alt:"mysql-replica-sync"}]],["h3","\u4ece\u8282\u70b9\u65e0\u6cd5\u5f71\u54cd\u4e3b\u8282\u70b9\u6570\u636e"],["p","\u5728\u4e3b\u8282\u70b9\u63d2\u5165\u6570\u636e\u5230account\u8868\u4e2d\u4e4b\u540e\uff0c\u4ece\u8282\u70b9\u4f1a\u81ea\u52a8\u5c06\u6570\u636e\u540c\u6b65\u5230\u672c\u5730\u89c1\u7ea2\u8272\u6846\uff0c\u5f53\u5728\u4ece\u8282\u70b9\u66f4\u65b0\u6570\u636e\u4e4b\u540e\u5728master\u8282\u70b9\u662f\u65e0\u6cd5\u67e5\u770b\u5230\u76f8\u5e94\u7684\u6570\u636e\u53d8\u66f4\u7684\u89c1\u84dd\u8272\u6846\u3002"],["p",["img",{title:null,src:"./assets/mysql-replica-sync2.png",alt:"mysql-replica-sync"}]]],meta:{order:1,title:"MySQL \u4e3b\u4ece\u540c\u6b65",type:"\u5165\u95e8",filename:"docs/database/mysql-master-replica.zh-CN.md"},toc:["ul"]}}});