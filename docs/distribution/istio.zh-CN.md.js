webpackJsonp([33],{1302:function(n,s){n.exports={content:["article",["p","\u5fae\u670d\u52a1\u67b6\u6784\u5728\u4e91\u5e73\u53f0\u4e0a\u53ef\u4ee5\u5bb9\u6613\u5b9e\u73b0\u6269\u5bb9\u7f29\u5bb9\uff0c\u4f46\u662f\u4e5f\u4f34\u968f\u7740\u670d\u52a1\u6fc0\u589e\uff0c\u6b64\u65f6\u8fd0\u7ef4\u56e2\u961f\u7684\u5de5\u4f5c\u91cf\u4e5f\u4f1a\u589e\u52a0\uff0c\u968f\u7740\u670d\u52a1\u7684\u589e\u591a\u8fd0\u7ef4\u6210\u672c\u4e5f\u968f\u4e4b\u589e\u9ad8\u3002 Istio\u53ef\u4ee5\u5e2e\u4f60\u76d1\u63a7\uff0c\u7ba1\u7406\u8fd9\u4e9b\u5fae\u670d\u52a1\u4e4b\u95f4\u7684\u8054\u7cfb\uff0c\u5e76\u589e\u52a0\u5b89\u5168\u63a7\u5236\u3002 "],["ul",["li",["p","Automatic load balancing for HTTP, gRPC, WebSocket, and TCP traffic."]],["li",["p","Fine-grained control of traffic behavior with rich routing rules, retries, failovers, and fault injection."]],["li",["p","A pluggable policy layer and configuration API supporting access controls, rate limits and quotas."]],["li",["p","Automatic metrics, logs, and traces for all traffic within a cluster, including cluster ingress and egress."]],["li",["p","Secure service-to-service communication in a cluster with strong identity-based authentication and authorization."]]],["h2","\u5b89\u88c5"],["ul",["li",["p","Download latest version"]]],["pre",{lang:null,highlighted:'curl <span class="token operator">-</span>L https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>istio<span class="token punctuation">.</span>io<span class="token operator">/</span>downloadIstio | sh <span class="token operator">-</span>'},["code","curl -L https://istio.io/downloadIstio | sh -"]],["ul",["li",["p","Setup Environment"]]],["pre",{lang:null,highlighted:'<span class="token punctuation">.</span>bash_profile\n\nexport PATH<span class="token operator">=</span><span class="token string">"$PATH:~/istio-1.5.0/bin"</span>'},["code",'.bash_profile\n\nexport PATH="$PATH:~/istio-1.5.0/bin"']],["ul",["li",["p","Install Precheck"]]],["pre",{lang:null,highlighted:'istioctl verify<span class="token operator">-</span>install\n\nChecking the cluster <span class="token keyword">to</span> make sure it is ready <span class="token keyword">for</span> Istio installation<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>\n\n<span class="token directive keyword">#1</span><span class="token punctuation">.</span> Kubernetes<span class="token operator">-</span>api\n<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>\nCan initialize the Kubernetes client<span class="token punctuation">.</span>\nCan query the Kubernetes API Server<span class="token punctuation">.</span>\n\n<span class="token directive keyword">#2</span><span class="token punctuation">.</span> Kubernetes<span class="token operator">-</span>version\n<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>\nIstio is compatible <span class="token keyword">with</span> Kubernetes<span class="token punctuation">:</span> v1<span class="token punctuation">.</span><span class="token number">17.3</span><span class="token punctuation">.</span>\n\n<span class="token directive keyword">#3</span><span class="token punctuation">.</span> Istio<span class="token operator">-</span>existence\n<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>\nIstio will be installed <span class="token keyword">in</span> the istio<span class="token operator">-</span>system namespace<span class="token punctuation">.</span>\n\n<span class="token directive keyword">#4</span><span class="token punctuation">.</span> Kubernetes<span class="token operator">-</span>setup\n<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>\nCan create necessary Kubernetes configurations<span class="token punctuation">:</span> Namespace<span class="token punctuation">,</span>ClusterRole<span class="token punctuation">,</span>ClusterRoleBinding<span class="token punctuation">,</span>CustomResourceDefinition<span class="token punctuation">,</span>Role<span class="token punctuation">,</span>ServiceAccount<span class="token punctuation">,</span>Service<span class="token punctuation">,</span>Deployments<span class="token punctuation">,</span>ConfigMap<span class="token punctuation">.</span>\n\n<span class="token directive keyword">#5</span><span class="token punctuation">.</span> SideCar<span class="token operator">-</span>Injector\n<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>\nThis Kubernetes cluster supports automatic sidecar injection<span class="token punctuation">.</span> <span class="token keyword">To</span> enable automatic sidecar injection see https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>istio<span class="token punctuation">.</span>io<span class="token operator">/</span>docs<span class="token operator">/</span>setup<span class="token operator">/</span>kubernetes<span class="token operator">/</span>additional<span class="token operator">-</span>setup<span class="token operator">/</span>sidecar<span class="token operator">-</span>injection<span class="token operator">/</span>#deploying<span class="token operator">-</span>an<span class="token operator">-</span>app\n\n<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>\nInstall Pre<span class="token operator">-</span>Check passed! The cluster is ready <span class="token keyword">for</span> Istio installation<span class="token punctuation">.</span>'},["code","istioctl verify-install\n\nChecking the cluster to make sure it is ready for Istio installation...\n\n#1. Kubernetes-api\n-----------------------\nCan initialize the Kubernetes client.\nCan query the Kubernetes API Server.\n\n#2. Kubernetes-version\n-----------------------\nIstio is compatible with Kubernetes: v1.17.3.\n\n#3. Istio-existence\n-----------------------\nIstio will be installed in the istio-system namespace.\n\n#4. Kubernetes-setup\n-----------------------\nCan create necessary Kubernetes configurations: Namespace,ClusterRole,ClusterRoleBinding,CustomResourceDefinition,Role,ServiceAccount,Service,Deployments,ConfigMap.\n\n#5. SideCar-Injector\n-----------------------\nThis Kubernetes cluster supports automatic sidecar injection. To enable automatic sidecar injection see https://istio.io/docs/setup/kubernetes/additional-setup/sidecar-injection/#deploying-an-app\n\n-----------------------\nInstall Pre-Check passed! The cluster is ready for Istio installation."]],["ul",["li",["p","Create namespace"]]],["pre",{lang:null,highlighted:'kubectl create namespace istio<span class="token operator">-</span>system'},["code","kubectl create namespace istio-system"]],["pre",{lang:null,highlighted:' kubectl create clusterrolebinding cluster<span class="token operator">-</span>admin<span class="token operator">-</span>binding \\\n    <span class="token operator">-</span><span class="token operator">-</span>clusterrole<span class="token operator">=</span>cluster<span class="token operator">-</span>admin \\\n    <span class="token operator">-</span><span class="token operator">-</span>user<span class="token operator">=</span>jetqin'},["code"," kubectl create clusterrolebinding cluster-admin-binding \\\n    --clusterrole=cluster-admin \\\n    --user=jetqin"]],["pre",{lang:null,highlighted:'istioctl manifest apply \\\n    <span class="token operator">-</span><span class="token operator">-</span>set values<span class="token punctuation">.</span>grafana<span class="token punctuation">.</span>enabled<span class="token operator">=</span><span class="token boolean">true</span> \\\n    <span class="token operator">-</span><span class="token operator">-</span>set values<span class="token punctuation">.</span>kiali<span class="token punctuation">.</span>enabled<span class="token operator">=</span><span class="token boolean">true</span> \\\n    <span class="token operator">-</span><span class="token operator">-</span>set values<span class="token punctuation">.</span>tracing<span class="token punctuation">.</span>enabled<span class="token operator">=</span><span class="token boolean">true</span> \\\n    <span class="token operator">-</span><span class="token operator">-</span>set values<span class="token punctuation">.</span><span class="token keyword">global</span><span class="token punctuation">.</span>proxy<span class="token punctuation">.</span>accessLogFile<span class="token operator">=</span><span class="token string">"/dev/stdout"</span> \\\n    <span class="token operator">-</span><span class="token operator">-</span>set values<span class="token punctuation">.</span>kiali<span class="token punctuation">.</span>createDemoSecret<span class="token operator">=</span><span class="token boolean">true</span> '},["code",'istioctl manifest apply \\\n    --set values.grafana.enabled=true \\\n    --set values.kiali.enabled=true \\\n    --set values.tracing.enabled=true \\\n    --set values.global.proxy.accessLogFile="/dev/stdout" \\\n    --set values.kiali.createDemoSecret=true ']],["ul",["li",["p","\u90e8\u7f72microservice"]]],["p","bookstore"],["pre",{lang:null,highlighted:'kubectl label namespace <span class="token keyword">default</span> istio<span class="token operator">-</span>injection<span class="token operator">=</span>enabled\nkubectl apply <span class="token operator">-</span>f https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>raw<span class="token punctuation">.</span>githubusercontent<span class="token punctuation">.</span>com<span class="token operator">/</span>istio<span class="token operator">/</span>istio<span class="token operator">/</span>release<span class="token operator">-</span><span class="token number">1.5</span><span class="token operator">/</span>samples<span class="token operator">/</span>bookinfo<span class="token operator">/</span>platform<span class="token operator">/</span>kube<span class="token operator">/</span>bookinfo<span class="token punctuation">.</span>yaml\n\nkubectl apply <span class="token operator">-</span>f https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>raw<span class="token punctuation">.</span>githubusercontent<span class="token punctuation">.</span>com<span class="token operator">/</span>istio<span class="token operator">/</span>istio<span class="token operator">/</span>release<span class="token operator">-</span><span class="token number">1.5</span><span class="token operator">/</span>samples<span class="token operator">/</span>bookinfo<span class="token operator">/</span>networking<span class="token operator">/</span>bookinfo<span class="token operator">-</span>gateway<span class="token punctuation">.</span>yaml\n\nexport INGRESS_PORT<span class="token operator">=</span>$<span class="token punctuation">(</span>kubectl <span class="token operator">-</span>n istio<span class="token operator">-</span>system get service istio<span class="token operator">-</span>ingressgateway <span class="token operator">-</span>o jsonpath<span class="token operator">=</span><span class="token string">\'{.spec.ports[?(@.name=="http2")].nodePort}\'</span><span class="token punctuation">)</span>\nexport SECURE_INGRESS_PORT<span class="token operator">=</span>$<span class="token punctuation">(</span>kubectl <span class="token operator">-</span>n istio<span class="token operator">-</span>system get service istio<span class="token operator">-</span>ingressgateway <span class="token operator">-</span>o jsonpath<span class="token operator">=</span><span class="token string">\'{.spec.ports[?(@.name=="https")].nodePort}\'</span><span class="token punctuation">)</span>\nexport INGRESS_HOST<span class="token operator">=</span>$<span class="token punctuation">(</span>minikube ip<span class="token punctuation">)</span>\nexport GATEWAY_URL<span class="token operator">=</span><span class="token variable">$INGRESS_HOST</span><span class="token punctuation">:</span><span class="token variable">$INGRESS_PORT</span>'},["code","kubectl label namespace default istio-injection=enabled\nkubectl apply -f https://raw.githubusercontent.com/istio/istio/release-1.5/samples/bookinfo/platform/kube/bookinfo.yaml\n\nkubectl apply -f https://raw.githubusercontent.com/istio/istio/release-1.5/samples/bookinfo/networking/bookinfo-gateway.yaml\n\nexport INGRESS_PORT=$(kubectl -n istio-system get service istio-ingressgateway -o jsonpath='{.spec.ports[?(@.name==\"http2\")].nodePort}')\nexport SECURE_INGRESS_PORT=$(kubectl -n istio-system get service istio-ingressgateway -o jsonpath='{.spec.ports[?(@.name==\"https\")].nodePort}')\nexport INGRESS_HOST=$(minikube ip)\nexport GATEWAY_URL=$INGRESS_HOST:$INGRESS_PORT"]],["p","E-commerce Store"],["pre",{lang:null,highlighted:'kubectl apply <span class="token operator">-</span>f istio<span class="token operator">-</span>manifests<span class="token punctuation">.</span>yaml\nkubectl apply <span class="token operator">-</span>f kubernetes<span class="token operator">-</span>manifests<span class="token punctuation">.</span>yaml\nkubectl delete serviceentry whitelist<span class="token operator">-</span>egress<span class="token operator">-</span>google<span class="token operator">-</span>metadata\nkubectl delete serviceentry whitelist<span class="token operator">-</span>egress<span class="token operator">-</span>googleapis\nkubectl delete svc frontend<span class="token operator">-</span>external'},["code","kubectl apply -f istio-manifests.yaml\nkubectl apply -f kubernetes-manifests.yaml\nkubectl delete serviceentry whitelist-egress-google-metadata\nkubectl delete serviceentry whitelist-egress-googleapis\nkubectl delete svc frontend-external"]],["p","istio-manifests.yaml"],["pre",{lang:null,highlighted:'apiVersion<span class="token punctuation">:</span> networking<span class="token punctuation">.</span>istio<span class="token punctuation">.</span>io<span class="token operator">/</span>v1alpha3\nkind<span class="token punctuation">:</span> Gateway\nmetadata<span class="token punctuation">:</span>\n  name<span class="token punctuation">:</span> frontend<span class="token operator">-</span>gateway\nspec<span class="token punctuation">:</span>\n  selector<span class="token punctuation">:</span>\n    istio<span class="token punctuation">:</span> ingressgateway # use Istio <span class="token keyword">default</span> gateway implementation\n  servers<span class="token punctuation">:</span>\n  <span class="token operator">-</span> port<span class="token punctuation">:</span>\n      number<span class="token punctuation">:</span> <span class="token number">80</span>\n      name<span class="token punctuation">:</span> http\n      protocol<span class="token punctuation">:</span> HTTP\n    hosts<span class="token punctuation">:</span>\n    <span class="token operator">-</span> <span class="token string">"*"</span>\n<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>\napiVersion<span class="token punctuation">:</span> networking<span class="token punctuation">.</span>istio<span class="token punctuation">.</span>io<span class="token operator">/</span>v1alpha3\nkind<span class="token punctuation">:</span> VirtualService\nmetadata<span class="token punctuation">:</span>\n  name<span class="token punctuation">:</span> frontend<span class="token operator">-</span>ingress\nspec<span class="token punctuation">:</span>\n  hosts<span class="token punctuation">:</span>\n  <span class="token operator">-</span> <span class="token string">"*"</span>\n  gateways<span class="token punctuation">:</span>\n  <span class="token operator">-</span> frontend<span class="token operator">-</span>gateway\n  http<span class="token punctuation">:</span>\n  <span class="token operator">-</span> route<span class="token punctuation">:</span>\n    <span class="token operator">-</span> destination<span class="token punctuation">:</span>\n        host<span class="token punctuation">:</span> frontend\n        port<span class="token punctuation">:</span>\n          number<span class="token punctuation">:</span> <span class="token number">80</span>\n<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>\napiVersion<span class="token punctuation">:</span> networking<span class="token punctuation">.</span>istio<span class="token punctuation">.</span>io<span class="token operator">/</span>v1alpha3\nkind<span class="token punctuation">:</span> VirtualService\nmetadata<span class="token punctuation">:</span>\n  name<span class="token punctuation">:</span> frontend\nspec<span class="token punctuation">:</span>\n  hosts<span class="token punctuation">:</span>\n  <span class="token operator">-</span> <span class="token string">"frontend.default.svc.cluster.local"</span>\n  http<span class="token punctuation">:</span>\n  <span class="token operator">-</span> route<span class="token punctuation">:</span>\n    <span class="token operator">-</span> destination<span class="token punctuation">:</span>\n        host<span class="token punctuation">:</span> frontend\n        port<span class="token punctuation">:</span>\n          number<span class="token punctuation">:</span> <span class="token number">80</span>\n<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>\napiVersion<span class="token punctuation">:</span> networking<span class="token punctuation">.</span>istio<span class="token punctuation">.</span>io<span class="token operator">/</span>v1alpha3\nkind<span class="token punctuation">:</span> ServiceEntry\nmetadata<span class="token punctuation">:</span>\n  name<span class="token punctuation">:</span> whitelist<span class="token operator">-</span>egress<span class="token operator">-</span>googleapis\nspec<span class="token punctuation">:</span>\n  hosts<span class="token punctuation">:</span>\n  <span class="token operator">-</span> <span class="token string">"accounts.google.com"</span> # Used <span class="token keyword">to</span> get token\n  <span class="token operator">-</span> <span class="token string">"*.googleapis.com"</span>\n  ports<span class="token punctuation">:</span>\n  <span class="token operator">-</span> number<span class="token punctuation">:</span> <span class="token number">80</span>\n    protocol<span class="token punctuation">:</span> HTTP\n    name<span class="token punctuation">:</span> http\n  <span class="token operator">-</span> number<span class="token punctuation">:</span> <span class="token number">443</span>\n    protocol<span class="token punctuation">:</span> HTTPS\n    name<span class="token punctuation">:</span> https\n<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>\napiVersion<span class="token punctuation">:</span> networking<span class="token punctuation">.</span>istio<span class="token punctuation">.</span>io<span class="token operator">/</span>v1alpha3\nkind<span class="token punctuation">:</span> ServiceEntry\nmetadata<span class="token punctuation">:</span>\n  name<span class="token punctuation">:</span> whitelist<span class="token operator">-</span>egress<span class="token operator">-</span>google<span class="token operator">-</span>metadata\nspec<span class="token punctuation">:</span>\n  hosts<span class="token punctuation">:</span>\n  <span class="token operator">-</span> metadata<span class="token punctuation">.</span>google<span class="token punctuation">.</span>internal\n  addresses<span class="token punctuation">:</span>\n  <span class="token operator">-</span> <span class="token number">169.254</span><span class="token punctuation">.</span><span class="token number">169.254</span> # GCE metadata server\n  ports<span class="token punctuation">:</span>\n  <span class="token operator">-</span> number<span class="token punctuation">:</span> <span class="token number">80</span>\n    name<span class="token punctuation">:</span> http\n    protocol<span class="token punctuation">:</span> HTTP\n  <span class="token operator">-</span> number<span class="token punctuation">:</span> <span class="token number">443</span>\n    name<span class="token punctuation">:</span> https\n    protocol<span class="token punctuation">:</span> HTTPS\n<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>'},["code",'apiVersion: networking.istio.io/v1alpha3\nkind: Gateway\nmetadata:\n  name: frontend-gateway\nspec:\n  selector:\n    istio: ingressgateway # use Istio default gateway implementation\n  servers:\n  - port:\n      number: 80\n      name: http\n      protocol: HTTP\n    hosts:\n    - "*"\n---\napiVersion: networking.istio.io/v1alpha3\nkind: VirtualService\nmetadata:\n  name: frontend-ingress\nspec:\n  hosts:\n  - "*"\n  gateways:\n  - frontend-gateway\n  http:\n  - route:\n    - destination:\n        host: frontend\n        port:\n          number: 80\n---\napiVersion: networking.istio.io/v1alpha3\nkind: VirtualService\nmetadata:\n  name: frontend\nspec:\n  hosts:\n  - "frontend.default.svc.cluster.local"\n  http:\n  - route:\n    - destination:\n        host: frontend\n        port:\n          number: 80\n---\napiVersion: networking.istio.io/v1alpha3\nkind: ServiceEntry\nmetadata:\n  name: whitelist-egress-googleapis\nspec:\n  hosts:\n  - "accounts.google.com" # Used to get token\n  - "*.googleapis.com"\n  ports:\n  - number: 80\n    protocol: HTTP\n    name: http\n  - number: 443\n    protocol: HTTPS\n    name: https\n---\napiVersion: networking.istio.io/v1alpha3\nkind: ServiceEntry\nmetadata:\n  name: whitelist-egress-google-metadata\nspec:\n  hosts:\n  - metadata.google.internal\n  addresses:\n  - 169.254.169.254 # GCE metadata server\n  ports:\n  - number: 80\n    name: http\n    protocol: HTTP\n  - number: 443\n    name: https\n    protocol: HTTPS\n---']],["p","kubernetes-manifests.yaml"],["pre",{lang:null,highlighted:'# Copyright <span class="token number">2018</span> Google LLC\n#\n# Licensed under the Apache License<span class="token punctuation">,</span> Version <span class="token number">2.0</span> <span class="token punctuation">(</span>the <span class="token string">"License"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>\n# you may <span class="token operator">not</span> use this file except <span class="token keyword">in</span> compliance <span class="token keyword">with</span> the License<span class="token punctuation">.</span>\n# You may obtain a copy of the License at\n#\n#      http<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>org<span class="token operator">/</span>licenses<span class="token operator">/</span>LICENSE<span class="token operator">-</span><span class="token number">2.0</span>\n#\n# Unless required by applicable law <span class="token operator">or</span> agreed <span class="token keyword">to</span> <span class="token keyword">in</span> writing<span class="token punctuation">,</span> software\n# distributed under the License is distributed on an <span class="token string">"AS IS"</span> BASIS<span class="token punctuation">,</span>\n# WITHOUT WARRANTIES <span class="token operator">OR</span> CONDITIONS OF ANY KIND<span class="token punctuation">,</span> either express <span class="token operator">or</span> implied<span class="token punctuation">.</span>\n# See the License <span class="token keyword">for</span> the specific language governing permissions <span class="token operator">and</span>\n# limitations under the License<span class="token punctuation">.</span>\n\n# <span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>\n# WARNING<span class="token punctuation">:</span> This file is autogenerated<span class="token punctuation">.</span> <span class="token keyword">Do</span> <span class="token operator">not</span> manually edit<span class="token punctuation">.</span>\n# <span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>\n\napiVersion<span class="token punctuation">:</span> apps<span class="token operator">/</span>v1\nkind<span class="token punctuation">:</span> Deployment\nmetadata<span class="token punctuation">:</span>\n  name<span class="token punctuation">:</span> emailservice\nspec<span class="token punctuation">:</span>\n  selector<span class="token punctuation">:</span>\n    matchLabels<span class="token punctuation">:</span>\n      app<span class="token punctuation">:</span> emailservice\n  template<span class="token punctuation">:</span>\n    metadata<span class="token punctuation">:</span>\n      labels<span class="token punctuation">:</span>\n        app<span class="token punctuation">:</span> emailservice\n    spec<span class="token punctuation">:</span>\n      terminationGracePeriodSeconds<span class="token punctuation">:</span> <span class="token number">5</span>\n      containers<span class="token punctuation">:</span>\n      <span class="token operator">-</span> name<span class="token punctuation">:</span> server\n        image<span class="token punctuation">:</span> gcr<span class="token punctuation">.</span>azk8s<span class="token punctuation">.</span>cn<span class="token operator">/</span>google<span class="token operator">-</span>samples<span class="token operator">/</span>microservices<span class="token operator">-</span>demo<span class="token operator">/</span>emailservice<span class="token punctuation">:</span>v0<span class="token punctuation">.</span><span class="token number">1.4</span>\n        ports<span class="token punctuation">:</span>\n        <span class="token operator">-</span> containerPort<span class="token punctuation">:</span> <span class="token number">8080</span>\n        env<span class="token punctuation">:</span>\n        <span class="token operator">-</span> name<span class="token punctuation">:</span> PORT\n          value<span class="token punctuation">:</span> <span class="token string">"8080"</span>\n        # <span class="token operator">-</span> name<span class="token punctuation">:</span> DISABLE_TRACING\n        #   value<span class="token punctuation">:</span> <span class="token string">"1"</span>\n        <span class="token operator">-</span> name<span class="token punctuation">:</span> DISABLE_PROFILER\n          value<span class="token punctuation">:</span> <span class="token string">"1"</span>\n        readinessProbe<span class="token punctuation">:</span>\n          periodSeconds<span class="token punctuation">:</span> <span class="token number">5</span>\n          exec<span class="token punctuation">:</span>\n            command<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"/bin/grpc_health_probe"</span><span class="token punctuation">,</span> <span class="token string">"-addr=:8080"</span><span class="token punctuation">]</span>\n        livenessProbe<span class="token punctuation">:</span>\n          periodSeconds<span class="token punctuation">:</span> <span class="token number">5</span>\n          exec<span class="token punctuation">:</span>\n            command<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"/bin/grpc_health_probe"</span><span class="token punctuation">,</span> <span class="token string">"-addr=:8080"</span><span class="token punctuation">]</span>\n        resources<span class="token punctuation">:</span>\n          requests<span class="token punctuation">:</span>\n            cpu<span class="token punctuation">:</span> 100m\n            memory<span class="token punctuation">:</span> 64Mi\n          limits<span class="token punctuation">:</span>\n            cpu<span class="token punctuation">:</span> 200m\n            memory<span class="token punctuation">:</span> 128Mi\n<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>\napiVersion<span class="token punctuation">:</span> v1\nkind<span class="token punctuation">:</span> Service\nmetadata<span class="token punctuation">:</span>\n  name<span class="token punctuation">:</span> emailservice\nspec<span class="token punctuation">:</span>\n  type<span class="token punctuation">:</span> ClusterIP\n  selector<span class="token punctuation">:</span>\n    app<span class="token punctuation">:</span> emailservice\n  ports<span class="token punctuation">:</span>\n  <span class="token operator">-</span> name<span class="token punctuation">:</span> grpc\n    port<span class="token punctuation">:</span> <span class="token number">5000</span>\n    targetPort<span class="token punctuation">:</span> <span class="token number">8080</span>\n<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>\napiVersion<span class="token punctuation">:</span> apps<span class="token operator">/</span>v1\nkind<span class="token punctuation">:</span> Deployment\nmetadata<span class="token punctuation">:</span>\n  name<span class="token punctuation">:</span> checkoutservice\nspec<span class="token punctuation">:</span>\n  selector<span class="token punctuation">:</span>\n    matchLabels<span class="token punctuation">:</span>\n      app<span class="token punctuation">:</span> checkoutservice\n  template<span class="token punctuation">:</span>\n    metadata<span class="token punctuation">:</span>\n      labels<span class="token punctuation">:</span>\n        app<span class="token punctuation">:</span> checkoutservice\n    spec<span class="token punctuation">:</span>\n      containers<span class="token punctuation">:</span>\n        <span class="token operator">-</span> name<span class="token punctuation">:</span> server\n          image<span class="token punctuation">:</span> gcr<span class="token punctuation">.</span>azk8s<span class="token punctuation">.</span>cn<span class="token operator">/</span>google<span class="token operator">-</span>samples<span class="token operator">/</span>microservices<span class="token operator">-</span>demo<span class="token operator">/</span>checkoutservice<span class="token punctuation">:</span>v0<span class="token punctuation">.</span><span class="token number">1.4</span>\n          ports<span class="token punctuation">:</span>\n          <span class="token operator">-</span> containerPort<span class="token punctuation">:</span> <span class="token number">5050</span>\n          readinessProbe<span class="token punctuation">:</span>\n            exec<span class="token punctuation">:</span>\n              command<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"/bin/grpc_health_probe"</span><span class="token punctuation">,</span> <span class="token string">"-addr=:5050"</span><span class="token punctuation">]</span>\n          livenessProbe<span class="token punctuation">:</span>\n            exec<span class="token punctuation">:</span>\n              command<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"/bin/grpc_health_probe"</span><span class="token punctuation">,</span> <span class="token string">"-addr=:5050"</span><span class="token punctuation">]</span>\n          env<span class="token punctuation">:</span>\n          <span class="token operator">-</span> name<span class="token punctuation">:</span> PORT\n            value<span class="token punctuation">:</span> <span class="token string">"5050"</span>\n          <span class="token operator">-</span> name<span class="token punctuation">:</span> PRODUCT_CATALOG_SERVICE_ADDR\n            value<span class="token punctuation">:</span> <span class="token string">"productcatalogservice:3550"</span>\n          <span class="token operator">-</span> name<span class="token punctuation">:</span> SHIPPING_SERVICE_ADDR\n            value<span class="token punctuation">:</span> <span class="token string">"shippingservice:50051"</span>\n          <span class="token operator">-</span> name<span class="token punctuation">:</span> PAYMENT_SERVICE_ADDR\n            value<span class="token punctuation">:</span> <span class="token string">"paymentservice:50051"</span>\n          <span class="token operator">-</span> name<span class="token punctuation">:</span> EMAIL_SERVICE_ADDR\n            value<span class="token punctuation">:</span> <span class="token string">"emailservice:5000"</span>\n          <span class="token operator">-</span> name<span class="token punctuation">:</span> CURRENCY_SERVICE_ADDR\n            value<span class="token punctuation">:</span> <span class="token string">"currencyservice:7000"</span>\n          <span class="token operator">-</span> name<span class="token punctuation">:</span> CART_SERVICE_ADDR\n            value<span class="token punctuation">:</span> <span class="token string">"cartservice:7070"</span>\n          # <span class="token operator">-</span> name<span class="token punctuation">:</span> DISABLE_STATS\n          #   value<span class="token punctuation">:</span> <span class="token string">"1"</span>\n          # <span class="token operator">-</span> name<span class="token punctuation">:</span> DISABLE_TRACING\n          #   value<span class="token punctuation">:</span> <span class="token string">"1"</span>\n          # <span class="token operator">-</span> name<span class="token punctuation">:</span> DISABLE_PROFILER\n          #   value<span class="token punctuation">:</span> <span class="token string">"1"</span>\n          # <span class="token operator">-</span> name<span class="token punctuation">:</span> JAEGER_SERVICE_ADDR\n          #   value<span class="token punctuation">:</span> <span class="token string">"jaeger-collector:14268"</span>\n          resources<span class="token punctuation">:</span>\n            requests<span class="token punctuation">:</span>\n              cpu<span class="token punctuation">:</span> 100m\n              memory<span class="token punctuation">:</span> 64Mi\n            limits<span class="token punctuation">:</span>\n              cpu<span class="token punctuation">:</span> 200m\n              memory<span class="token punctuation">:</span> 128Mi\n<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>\napiVersion<span class="token punctuation">:</span> v1\nkind<span class="token punctuation">:</span> Service\nmetadata<span class="token punctuation">:</span>\n  name<span class="token punctuation">:</span> checkoutservice\nspec<span class="token punctuation">:</span>\n  type<span class="token punctuation">:</span> ClusterIP\n  selector<span class="token punctuation">:</span>\n    app<span class="token punctuation">:</span> checkoutservice\n  ports<span class="token punctuation">:</span>\n  <span class="token operator">-</span> name<span class="token punctuation">:</span> grpc\n    port<span class="token punctuation">:</span> <span class="token number">5050</span>\n    targetPort<span class="token punctuation">:</span> <span class="token number">5050</span>\n<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>\napiVersion<span class="token punctuation">:</span> apps<span class="token operator">/</span>v1\nkind<span class="token punctuation">:</span> Deployment\nmetadata<span class="token punctuation">:</span>\n  name<span class="token punctuation">:</span> recommendationservice\nspec<span class="token punctuation">:</span>\n  selector<span class="token punctuation">:</span>\n    matchLabels<span class="token punctuation">:</span>\n      app<span class="token punctuation">:</span> recommendationservice\n  template<span class="token punctuation">:</span>\n    metadata<span class="token punctuation">:</span>\n      labels<span class="token punctuation">:</span>\n        app<span class="token punctuation">:</span> recommendationservice\n    spec<span class="token punctuation">:</span>\n      terminationGracePeriodSeconds<span class="token punctuation">:</span> <span class="token number">5</span>\n      containers<span class="token punctuation">:</span>\n      <span class="token operator">-</span> name<span class="token punctuation">:</span> server\n        image<span class="token punctuation">:</span> gcr<span class="token punctuation">.</span>azk8s<span class="token punctuation">.</span>cn<span class="token operator">/</span>google<span class="token operator">-</span>samples<span class="token operator">/</span>microservices<span class="token operator">-</span>demo<span class="token operator">/</span>recommendationservice<span class="token punctuation">:</span>v0<span class="token punctuation">.</span><span class="token number">1.4</span>\n        ports<span class="token punctuation">:</span>\n        <span class="token operator">-</span> containerPort<span class="token punctuation">:</span> <span class="token number">8080</span>\n        readinessProbe<span class="token punctuation">:</span>\n          periodSeconds<span class="token punctuation">:</span> <span class="token number">5</span>\n          exec<span class="token punctuation">:</span>\n            command<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"/bin/grpc_health_probe"</span><span class="token punctuation">,</span> <span class="token string">"-addr=:8080"</span><span class="token punctuation">]</span>\n        livenessProbe<span class="token punctuation">:</span>\n          periodSeconds<span class="token punctuation">:</span> <span class="token number">5</span>\n          exec<span class="token punctuation">:</span>\n            command<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"/bin/grpc_health_probe"</span><span class="token punctuation">,</span> <span class="token string">"-addr=:8080"</span><span class="token punctuation">]</span>\n        env<span class="token punctuation">:</span>\n        <span class="token operator">-</span> name<span class="token punctuation">:</span> PORT\n          value<span class="token punctuation">:</span> <span class="token string">"8080"</span>\n        <span class="token operator">-</span> name<span class="token punctuation">:</span> PRODUCT_CATALOG_SERVICE_ADDR\n          value<span class="token punctuation">:</span> <span class="token string">"productcatalogservice:3550"</span>\n        <span class="token operator">-</span> name<span class="token punctuation">:</span> DISABLE_TRACING\n          value<span class="token punctuation">:</span> <span class="token string">"1"</span>\n        # <span class="token operator">-</span> name<span class="token punctuation">:</span> DISABLE_PROFILER\n        #   value<span class="token punctuation">:</span> <span class="token string">"1"</span>\n        # <span class="token operator">-</span> name<span class="token punctuation">:</span> DISABLE_DEBUGGER\n        #   value<span class="token punctuation">:</span> <span class="token string">"1"</span>\n        resources<span class="token punctuation">:</span>\n          requests<span class="token punctuation">:</span>\n            cpu<span class="token punctuation">:</span> 100m\n            memory<span class="token punctuation">:</span> 220Mi\n          limits<span class="token punctuation">:</span>\n            cpu<span class="token punctuation">:</span> 200m\n            memory<span class="token punctuation">:</span> 450Mi\n<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>\napiVersion<span class="token punctuation">:</span> v1\nkind<span class="token punctuation">:</span> Service\nmetadata<span class="token punctuation">:</span>\n  name<span class="token punctuation">:</span> recommendationservice\nspec<span class="token punctuation">:</span>\n  type<span class="token punctuation">:</span> ClusterIP\n  selector<span class="token punctuation">:</span>\n    app<span class="token punctuation">:</span> recommendationservice\n  ports<span class="token punctuation">:</span>\n  <span class="token operator">-</span> name<span class="token punctuation">:</span> grpc\n    port<span class="token punctuation">:</span> <span class="token number">8080</span>\n    targetPort<span class="token punctuation">:</span> <span class="token number">8080</span>\n<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>\napiVersion<span class="token punctuation">:</span> apps<span class="token operator">/</span>v1\nkind<span class="token punctuation">:</span> Deployment\nmetadata<span class="token punctuation">:</span>\n  name<span class="token punctuation">:</span> frontend\nspec<span class="token punctuation">:</span>\n  selector<span class="token punctuation">:</span>\n    matchLabels<span class="token punctuation">:</span>\n      app<span class="token punctuation">:</span> frontend\n  template<span class="token punctuation">:</span>\n    metadata<span class="token punctuation">:</span>\n      labels<span class="token punctuation">:</span>\n        app<span class="token punctuation">:</span> frontend\n      annotations<span class="token punctuation">:</span>\n        sidecar<span class="token punctuation">.</span>istio<span class="token punctuation">.</span>io<span class="token operator">/</span>rewriteAppHTTPProbers<span class="token punctuation">:</span> <span class="token string">"true"</span>\n    spec<span class="token punctuation">:</span>\n      containers<span class="token punctuation">:</span>\n        <span class="token operator">-</span> name<span class="token punctuation">:</span> server\n          image<span class="token punctuation">:</span> gcr<span class="token punctuation">.</span>azk8s<span class="token punctuation">.</span>cn<span class="token operator">/</span>google<span class="token operator">-</span>samples<span class="token operator">/</span>microservices<span class="token operator">-</span>demo<span class="token operator">/</span>frontend<span class="token punctuation">:</span>v0<span class="token punctuation">.</span><span class="token number">1.4</span>\n          ports<span class="token punctuation">:</span>\n          <span class="token operator">-</span> containerPort<span class="token punctuation">:</span> <span class="token number">8080</span>\n          readinessProbe<span class="token punctuation">:</span>\n            initialDelaySeconds<span class="token punctuation">:</span> <span class="token number">10</span>\n            httpGet<span class="token punctuation">:</span>\n              path<span class="token punctuation">:</span> <span class="token string">"/_healthz"</span>\n              port<span class="token punctuation">:</span> <span class="token number">8080</span>\n              httpHeaders<span class="token punctuation">:</span>\n              <span class="token operator">-</span> name<span class="token punctuation">:</span> <span class="token string">"Cookie"</span>\n                value<span class="token punctuation">:</span> <span class="token string">"shop_session-id=x-readiness-probe"</span>\n          livenessProbe<span class="token punctuation">:</span>\n            initialDelaySeconds<span class="token punctuation">:</span> <span class="token number">10</span>\n            httpGet<span class="token punctuation">:</span>\n              path<span class="token punctuation">:</span> <span class="token string">"/_healthz"</span>\n              port<span class="token punctuation">:</span> <span class="token number">8080</span>\n              httpHeaders<span class="token punctuation">:</span>\n              <span class="token operator">-</span> name<span class="token punctuation">:</span> <span class="token string">"Cookie"</span>\n                value<span class="token punctuation">:</span> <span class="token string">"shop_session-id=x-liveness-probe"</span>\n          env<span class="token punctuation">:</span>\n          <span class="token operator">-</span> name<span class="token punctuation">:</span> PORT\n            value<span class="token punctuation">:</span> <span class="token string">"8080"</span>\n          <span class="token operator">-</span> name<span class="token punctuation">:</span> PRODUCT_CATALOG_SERVICE_ADDR\n            value<span class="token punctuation">:</span> <span class="token string">"productcatalogservice:3550"</span>\n          <span class="token operator">-</span> name<span class="token punctuation">:</span> CURRENCY_SERVICE_ADDR\n            value<span class="token punctuation">:</span> <span class="token string">"currencyservice:7000"</span>\n          <span class="token operator">-</span> name<span class="token punctuation">:</span> CART_SERVICE_ADDR\n            value<span class="token punctuation">:</span> <span class="token string">"cartservice:7070"</span>\n          <span class="token operator">-</span> name<span class="token punctuation">:</span> RECOMMENDATION_SERVICE_ADDR\n            value<span class="token punctuation">:</span> <span class="token string">"recommendationservice:8080"</span>\n          <span class="token operator">-</span> name<span class="token punctuation">:</span> SHIPPING_SERVICE_ADDR\n            value<span class="token punctuation">:</span> <span class="token string">"shippingservice:50051"</span>\n          <span class="token operator">-</span> name<span class="token punctuation">:</span> CHECKOUT_SERVICE_ADDR\n            value<span class="token punctuation">:</span> <span class="token string">"checkoutservice:5050"</span>\n          <span class="token operator">-</span> name<span class="token punctuation">:</span> AD_SERVICE_ADDR\n            value<span class="token punctuation">:</span> <span class="token string">"adservice:9555"</span>\n          <span class="token operator">-</span> name<span class="token punctuation">:</span> DISABLE_TRACING\n            value<span class="token punctuation">:</span> <span class="token string">"1"</span>\n          # <span class="token operator">-</span> name<span class="token punctuation">:</span> DISABLE_PROFILER\n          #   value<span class="token punctuation">:</span> <span class="token string">"1"</span>\n          # <span class="token operator">-</span> name<span class="token punctuation">:</span> JAEGER_SERVICE_ADDR\n          #   value<span class="token punctuation">:</span> <span class="token string">"jaeger-collector:14268"</span>\n          resources<span class="token punctuation">:</span>\n            requests<span class="token punctuation">:</span>\n              cpu<span class="token punctuation">:</span> 100m\n              memory<span class="token punctuation">:</span> 64Mi\n            limits<span class="token punctuation">:</span>\n              cpu<span class="token punctuation">:</span> 200m\n              memory<span class="token punctuation">:</span> 128Mi\n<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>\napiVersion<span class="token punctuation">:</span> v1\nkind<span class="token punctuation">:</span> Service\nmetadata<span class="token punctuation">:</span>\n  name<span class="token punctuation">:</span> frontend\nspec<span class="token punctuation">:</span>\n  type<span class="token punctuation">:</span> ClusterIP\n  selector<span class="token punctuation">:</span>\n    app<span class="token punctuation">:</span> frontend\n  ports<span class="token punctuation">:</span>\n  <span class="token operator">-</span> name<span class="token punctuation">:</span> http\n    port<span class="token punctuation">:</span> <span class="token number">80</span>\n    targetPort<span class="token punctuation">:</span> <span class="token number">8080</span>\n<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>\napiVersion<span class="token punctuation">:</span> v1\nkind<span class="token punctuation">:</span> Service\nmetadata<span class="token punctuation">:</span>\n  name<span class="token punctuation">:</span> frontend<span class="token operator">-</span>external\nspec<span class="token punctuation">:</span>\n  type<span class="token punctuation">:</span> LoadBalancer\n  selector<span class="token punctuation">:</span>\n    app<span class="token punctuation">:</span> frontend\n  ports<span class="token punctuation">:</span>\n  <span class="token operator">-</span> name<span class="token punctuation">:</span> http\n    port<span class="token punctuation">:</span> <span class="token number">80</span>\n    targetPort<span class="token punctuation">:</span> <span class="token number">8080</span>\n<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>\napiVersion<span class="token punctuation">:</span> apps<span class="token operator">/</span>v1\nkind<span class="token punctuation">:</span> Deployment\nmetadata<span class="token punctuation">:</span>\n  name<span class="token punctuation">:</span> paymentservice\nspec<span class="token punctuation">:</span>\n  selector<span class="token punctuation">:</span>\n    matchLabels<span class="token punctuation">:</span>\n      app<span class="token punctuation">:</span> paymentservice\n  template<span class="token punctuation">:</span>\n    metadata<span class="token punctuation">:</span>\n      labels<span class="token punctuation">:</span>\n        app<span class="token punctuation">:</span> paymentservice\n    spec<span class="token punctuation">:</span>\n      terminationGracePeriodSeconds<span class="token punctuation">:</span> <span class="token number">5</span>\n      containers<span class="token punctuation">:</span>\n      <span class="token operator">-</span> name<span class="token punctuation">:</span> server\n        image<span class="token punctuation">:</span> gcr<span class="token punctuation">.</span>azk8s<span class="token punctuation">.</span>cn<span class="token operator">/</span>google<span class="token operator">-</span>samples<span class="token operator">/</span>microservices<span class="token operator">-</span>demo<span class="token operator">/</span>paymentservice<span class="token punctuation">:</span>v0<span class="token punctuation">.</span><span class="token number">1.4</span>\n        ports<span class="token punctuation">:</span>\n        <span class="token operator">-</span> containerPort<span class="token punctuation">:</span> <span class="token number">50051</span>\n        env<span class="token punctuation">:</span>\n        <span class="token operator">-</span> name<span class="token punctuation">:</span> PORT\n          value<span class="token punctuation">:</span> <span class="token string">"50051"</span>\n        readinessProbe<span class="token punctuation">:</span>\n          exec<span class="token punctuation">:</span>\n            command<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"/bin/grpc_health_probe"</span><span class="token punctuation">,</span> <span class="token string">"-addr=:50051"</span><span class="token punctuation">]</span>\n        livenessProbe<span class="token punctuation">:</span>\n          exec<span class="token punctuation">:</span>\n            command<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"/bin/grpc_health_probe"</span><span class="token punctuation">,</span> <span class="token string">"-addr=:50051"</span><span class="token punctuation">]</span>\n        resources<span class="token punctuation">:</span>\n          requests<span class="token punctuation">:</span>\n            cpu<span class="token punctuation">:</span> 100m\n            memory<span class="token punctuation">:</span> 64Mi\n          limits<span class="token punctuation">:</span>\n            cpu<span class="token punctuation">:</span> 200m\n            memory<span class="token punctuation">:</span> 128Mi\n<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>\napiVersion<span class="token punctuation">:</span> v1\nkind<span class="token punctuation">:</span> Service\nmetadata<span class="token punctuation">:</span>\n  name<span class="token punctuation">:</span> paymentservice\nspec<span class="token punctuation">:</span>\n  type<span class="token punctuation">:</span> ClusterIP\n  selector<span class="token punctuation">:</span>\n    app<span class="token punctuation">:</span> paymentservice\n  ports<span class="token punctuation">:</span>\n  <span class="token operator">-</span> name<span class="token punctuation">:</span> grpc\n    port<span class="token punctuation">:</span> <span class="token number">50051</span>\n    targetPort<span class="token punctuation">:</span> <span class="token number">50051</span>\n<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>\napiVersion<span class="token punctuation">:</span> apps<span class="token operator">/</span>v1\nkind<span class="token punctuation">:</span> Deployment\nmetadata<span class="token punctuation">:</span>\n  name<span class="token punctuation">:</span> productcatalogservice\nspec<span class="token punctuation">:</span>\n  selector<span class="token punctuation">:</span>\n    matchLabels<span class="token punctuation">:</span>\n      app<span class="token punctuation">:</span> productcatalogservice\n  template<span class="token punctuation">:</span>\n    metadata<span class="token punctuation">:</span>\n      labels<span class="token punctuation">:</span>\n        app<span class="token punctuation">:</span> productcatalogservice\n    spec<span class="token punctuation">:</span>\n      terminationGracePeriodSeconds<span class="token punctuation">:</span> <span class="token number">5</span>\n      containers<span class="token punctuation">:</span>\n      <span class="token operator">-</span> name<span class="token punctuation">:</span> server\n        image<span class="token punctuation">:</span> gcr<span class="token punctuation">.</span>azk8s<span class="token punctuation">.</span>cn<span class="token operator">/</span>google<span class="token operator">-</span>samples<span class="token operator">/</span>microservices<span class="token operator">-</span>demo<span class="token operator">/</span>productcatalogservice<span class="token punctuation">:</span>v0<span class="token punctuation">.</span><span class="token number">1.4</span>\n        ports<span class="token punctuation">:</span>\n        <span class="token operator">-</span> containerPort<span class="token punctuation">:</span> <span class="token number">3550</span>\n        env<span class="token punctuation">:</span>\n        <span class="token operator">-</span> name<span class="token punctuation">:</span> PORT\n          value<span class="token punctuation">:</span> <span class="token string">"3550"</span>\n        # <span class="token operator">-</span> name<span class="token punctuation">:</span> DISABLE_STATS\n        #   value<span class="token punctuation">:</span> <span class="token string">"1"</span>\n        # <span class="token operator">-</span> name<span class="token punctuation">:</span> DISABLE_TRACING\n        #   value<span class="token punctuation">:</span> <span class="token string">"1"</span>\n        # <span class="token operator">-</span> name<span class="token punctuation">:</span> DISABLE_PROFILER\n        #   value<span class="token punctuation">:</span> <span class="token string">"1"</span>\n        # <span class="token operator">-</span> name<span class="token punctuation">:</span> JAEGER_SERVICE_ADDR\n        #   value<span class="token punctuation">:</span> <span class="token string">"jaeger-collector:14268"</span>\n        readinessProbe<span class="token punctuation">:</span>\n          exec<span class="token punctuation">:</span>\n            command<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"/bin/grpc_health_probe"</span><span class="token punctuation">,</span> <span class="token string">"-addr=:3550"</span><span class="token punctuation">]</span>\n        livenessProbe<span class="token punctuation">:</span>\n          exec<span class="token punctuation">:</span>\n            command<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"/bin/grpc_health_probe"</span><span class="token punctuation">,</span> <span class="token string">"-addr=:3550"</span><span class="token punctuation">]</span>\n        resources<span class="token punctuation">:</span>\n          requests<span class="token punctuation">:</span>\n            cpu<span class="token punctuation">:</span> 100m\n            memory<span class="token punctuation">:</span> 64Mi\n          limits<span class="token punctuation">:</span>\n            cpu<span class="token punctuation">:</span> 200m\n            memory<span class="token punctuation">:</span> 128Mi\n<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>\napiVersion<span class="token punctuation">:</span> v1\nkind<span class="token punctuation">:</span> Service\nmetadata<span class="token punctuation">:</span>\n  name<span class="token punctuation">:</span> productcatalogservice\nspec<span class="token punctuation">:</span>\n  type<span class="token punctuation">:</span> ClusterIP\n  selector<span class="token punctuation">:</span>\n    app<span class="token punctuation">:</span> productcatalogservice\n  ports<span class="token punctuation">:</span>\n  <span class="token operator">-</span> name<span class="token punctuation">:</span> grpc\n    port<span class="token punctuation">:</span> <span class="token number">3550</span>\n    targetPort<span class="token punctuation">:</span> <span class="token number">3550</span>\n<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>\napiVersion<span class="token punctuation">:</span> apps<span class="token operator">/</span>v1\nkind<span class="token punctuation">:</span> Deployment\nmetadata<span class="token punctuation">:</span>\n  name<span class="token punctuation">:</span> cartservice\nspec<span class="token punctuation">:</span>\n  selector<span class="token punctuation">:</span>\n    matchLabels<span class="token punctuation">:</span>\n      app<span class="token punctuation">:</span> cartservice\n  template<span class="token punctuation">:</span>\n    metadata<span class="token punctuation">:</span>\n      labels<span class="token punctuation">:</span>\n        app<span class="token punctuation">:</span> cartservice\n    spec<span class="token punctuation">:</span>\n      terminationGracePeriodSeconds<span class="token punctuation">:</span> <span class="token number">5</span>\n      containers<span class="token punctuation">:</span>\n      <span class="token operator">-</span> name<span class="token punctuation">:</span> server\n        image<span class="token punctuation">:</span> gcr<span class="token punctuation">.</span>azk8s<span class="token punctuation">.</span>cn<span class="token operator">/</span>google<span class="token operator">-</span>samples<span class="token operator">/</span>microservices<span class="token operator">-</span>demo<span class="token operator">/</span>cartservice<span class="token punctuation">:</span>v0<span class="token punctuation">.</span><span class="token number">1.4</span>\n        ports<span class="token punctuation">:</span>\n        <span class="token operator">-</span> containerPort<span class="token punctuation">:</span> <span class="token number">7070</span>\n        env<span class="token punctuation">:</span>\n        <span class="token operator">-</span> name<span class="token punctuation">:</span> REDIS_ADDR\n          value<span class="token punctuation">:</span> <span class="token string">"redis-cart:6379"</span>\n        <span class="token operator">-</span> name<span class="token punctuation">:</span> PORT\n          value<span class="token punctuation">:</span> <span class="token string">"7070"</span>\n        <span class="token operator">-</span> name<span class="token punctuation">:</span> LISTEN_ADDR\n          value<span class="token punctuation">:</span> <span class="token string">"0.0.0.0"</span>\n        resources<span class="token punctuation">:</span>\n          requests<span class="token punctuation">:</span>\n            cpu<span class="token punctuation">:</span> 200m\n            memory<span class="token punctuation">:</span> 64Mi\n          limits<span class="token punctuation">:</span>\n            cpu<span class="token punctuation">:</span> 300m\n            memory<span class="token punctuation">:</span> 128Mi\n        readinessProbe<span class="token punctuation">:</span>\n          initialDelaySeconds<span class="token punctuation">:</span> <span class="token number">15</span>\n          exec<span class="token punctuation">:</span>\n            command<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"/bin/grpc_health_probe"</span><span class="token punctuation">,</span> <span class="token string">"-addr=:7070"</span><span class="token punctuation">,</span> <span class="token string">"-rpc-timeout=5s"</span><span class="token punctuation">]</span>\n        livenessProbe<span class="token punctuation">:</span>\n          initialDelaySeconds<span class="token punctuation">:</span> <span class="token number">15</span>\n          periodSeconds<span class="token punctuation">:</span> <span class="token number">10</span>\n          exec<span class="token punctuation">:</span>\n            command<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"/bin/grpc_health_probe"</span><span class="token punctuation">,</span> <span class="token string">"-addr=:7070"</span><span class="token punctuation">,</span> <span class="token string">"-rpc-timeout=5s"</span><span class="token punctuation">]</span>\n<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>\napiVersion<span class="token punctuation">:</span> v1\nkind<span class="token punctuation">:</span> Service\nmetadata<span class="token punctuation">:</span>\n  name<span class="token punctuation">:</span> cartservice\nspec<span class="token punctuation">:</span>\n  type<span class="token punctuation">:</span> ClusterIP\n  selector<span class="token punctuation">:</span>\n    app<span class="token punctuation">:</span> cartservice\n  ports<span class="token punctuation">:</span>\n  <span class="token operator">-</span> name<span class="token punctuation">:</span> grpc\n    port<span class="token punctuation">:</span> <span class="token number">7070</span>\n    targetPort<span class="token punctuation">:</span> <span class="token number">7070</span>\n<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>\napiVersion<span class="token punctuation">:</span> apps<span class="token operator">/</span>v1\nkind<span class="token punctuation">:</span> Deployment\nmetadata<span class="token punctuation">:</span>\n  name<span class="token punctuation">:</span> loadgenerator\nspec<span class="token punctuation">:</span>\n  selector<span class="token punctuation">:</span>\n    matchLabels<span class="token punctuation">:</span>\n      app<span class="token punctuation">:</span> loadgenerator\n  replicas<span class="token punctuation">:</span> <span class="token number">1</span>\n  template<span class="token punctuation">:</span>\n    metadata<span class="token punctuation">:</span>\n      labels<span class="token punctuation">:</span>\n        app<span class="token punctuation">:</span> loadgenerator\n      annotations<span class="token punctuation">:</span>\n        sidecar<span class="token punctuation">.</span>istio<span class="token punctuation">.</span>io<span class="token operator">/</span>rewriteAppHTTPProbers<span class="token punctuation">:</span> <span class="token string">"true"</span>\n    spec<span class="token punctuation">:</span>\n      terminationGracePeriodSeconds<span class="token punctuation">:</span> <span class="token number">5</span>\n      restartPolicy<span class="token punctuation">:</span> Always\n      containers<span class="token punctuation">:</span>\n      <span class="token operator">-</span> name<span class="token punctuation">:</span> main\n        image<span class="token punctuation">:</span> gcr<span class="token punctuation">.</span>azk8s<span class="token punctuation">.</span>cn<span class="token operator">/</span>google<span class="token operator">-</span>samples<span class="token operator">/</span>microservices<span class="token operator">-</span>demo<span class="token operator">/</span>loadgenerator<span class="token punctuation">:</span>v0<span class="token punctuation">.</span><span class="token number">1.4</span>\n        env<span class="token punctuation">:</span>\n        <span class="token operator">-</span> name<span class="token punctuation">:</span> FRONTEND_ADDR\n          value<span class="token punctuation">:</span> <span class="token string">"frontend:80"</span>\n        <span class="token operator">-</span> name<span class="token punctuation">:</span> USERS\n          value<span class="token punctuation">:</span> <span class="token string">"10"</span>\n        resources<span class="token punctuation">:</span>\n          requests<span class="token punctuation">:</span>\n            cpu<span class="token punctuation">:</span> 300m\n            memory<span class="token punctuation">:</span> 256Mi\n          limits<span class="token punctuation">:</span>\n            cpu<span class="token punctuation">:</span> 500m\n            memory<span class="token punctuation">:</span> 512Mi\n<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>\napiVersion<span class="token punctuation">:</span> apps<span class="token operator">/</span>v1\nkind<span class="token punctuation">:</span> Deployment\nmetadata<span class="token punctuation">:</span>\n  name<span class="token punctuation">:</span> currencyservice\nspec<span class="token punctuation">:</span>\n  selector<span class="token punctuation">:</span>\n    matchLabels<span class="token punctuation">:</span>\n      app<span class="token punctuation">:</span> currencyservice\n  template<span class="token punctuation">:</span>\n    metadata<span class="token punctuation">:</span>\n      labels<span class="token punctuation">:</span>\n        app<span class="token punctuation">:</span> currencyservice\n    spec<span class="token punctuation">:</span>\n      terminationGracePeriodSeconds<span class="token punctuation">:</span> <span class="token number">5</span>\n      containers<span class="token punctuation">:</span>\n      <span class="token operator">-</span> name<span class="token punctuation">:</span> server\n        image<span class="token punctuation">:</span> gcr<span class="token punctuation">.</span>azk8s<span class="token punctuation">.</span>cn<span class="token operator">/</span>google<span class="token operator">-</span>samples<span class="token operator">/</span>microservices<span class="token operator">-</span>demo<span class="token operator">/</span>currencyservice<span class="token punctuation">:</span>v0<span class="token punctuation">.</span><span class="token number">1.4</span>\n        ports<span class="token punctuation">:</span>\n        <span class="token operator">-</span> name<span class="token punctuation">:</span> grpc\n          containerPort<span class="token punctuation">:</span> <span class="token number">7000</span>\n        env<span class="token punctuation">:</span>\n        <span class="token operator">-</span> name<span class="token punctuation">:</span> PORT\n          value<span class="token punctuation">:</span> <span class="token string">"7000"</span>\n        # <span class="token operator">-</span> name<span class="token punctuation">:</span> DISABLE_TRACING\n        #   value<span class="token punctuation">:</span> <span class="token string">"1"</span>\n        # <span class="token operator">-</span> name<span class="token punctuation">:</span> DISABLE_PROFILER\n        #   value<span class="token punctuation">:</span> <span class="token string">"1"</span>\n        # <span class="token operator">-</span> name<span class="token punctuation">:</span> DISABLE_DEBUGGER\n        #   value<span class="token punctuation">:</span> <span class="token string">"1"</span>\n        readinessProbe<span class="token punctuation">:</span>\n          exec<span class="token punctuation">:</span>\n            command<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"/bin/grpc_health_probe"</span><span class="token punctuation">,</span> <span class="token string">"-addr=:7000"</span><span class="token punctuation">]</span>\n        livenessProbe<span class="token punctuation">:</span>\n          exec<span class="token punctuation">:</span>\n            command<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"/bin/grpc_health_probe"</span><span class="token punctuation">,</span> <span class="token string">"-addr=:7000"</span><span class="token punctuation">]</span>\n        resources<span class="token punctuation">:</span>\n          requests<span class="token punctuation">:</span>\n            cpu<span class="token punctuation">:</span> 100m\n            memory<span class="token punctuation">:</span> 64Mi\n          limits<span class="token punctuation">:</span>\n            cpu<span class="token punctuation">:</span> 200m\n            memory<span class="token punctuation">:</span> 128Mi\n<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>\napiVersion<span class="token punctuation">:</span> v1\nkind<span class="token punctuation">:</span> Service\nmetadata<span class="token punctuation">:</span>\n  name<span class="token punctuation">:</span> currencyservice\nspec<span class="token punctuation">:</span>\n  type<span class="token punctuation">:</span> ClusterIP\n  selector<span class="token punctuation">:</span>\n    app<span class="token punctuation">:</span> currencyservice\n  ports<span class="token punctuation">:</span>\n  <span class="token operator">-</span> name<span class="token punctuation">:</span> grpc\n    port<span class="token punctuation">:</span> <span class="token number">7000</span>\n    targetPort<span class="token punctuation">:</span> <span class="token number">7000</span>\n<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>\napiVersion<span class="token punctuation">:</span> apps<span class="token operator">/</span>v1\nkind<span class="token punctuation">:</span> Deployment\nmetadata<span class="token punctuation">:</span>\n  name<span class="token punctuation">:</span> shippingservice\nspec<span class="token punctuation">:</span>\n  selector<span class="token punctuation">:</span>\n    matchLabels<span class="token punctuation">:</span>\n      app<span class="token punctuation">:</span> shippingservice\n  template<span class="token punctuation">:</span>\n    metadata<span class="token punctuation">:</span>\n      labels<span class="token punctuation">:</span>\n        app<span class="token punctuation">:</span> shippingservice\n    spec<span class="token punctuation">:</span>\n      containers<span class="token punctuation">:</span>\n      <span class="token operator">-</span> name<span class="token punctuation">:</span> server\n        image<span class="token punctuation">:</span> gcr<span class="token punctuation">.</span>azk8s<span class="token punctuation">.</span>cn<span class="token operator">/</span>google<span class="token operator">-</span>samples<span class="token operator">/</span>microservices<span class="token operator">-</span>demo<span class="token operator">/</span>shippingservice<span class="token punctuation">:</span>v0<span class="token punctuation">.</span><span class="token number">1.4</span>\n        ports<span class="token punctuation">:</span>\n        <span class="token operator">-</span> containerPort<span class="token punctuation">:</span> <span class="token number">50051</span>\n        env<span class="token punctuation">:</span>\n        <span class="token operator">-</span> name<span class="token punctuation">:</span> PORT\n          value<span class="token punctuation">:</span> <span class="token string">"50051"</span>\n        # <span class="token operator">-</span> name<span class="token punctuation">:</span> DISABLE_STATS\n        #   value<span class="token punctuation">:</span> <span class="token string">"1"</span>\n        # <span class="token operator">-</span> name<span class="token punctuation">:</span> DISABLE_TRACING\n        #   value<span class="token punctuation">:</span> <span class="token string">"1"</span>\n        # <span class="token operator">-</span> name<span class="token punctuation">:</span> DISABLE_PROFILER\n        #   value<span class="token punctuation">:</span> <span class="token string">"1"</span>\n        # <span class="token operator">-</span> name<span class="token punctuation">:</span> JAEGER_SERVICE_ADDR\n        #   value<span class="token punctuation">:</span> <span class="token string">"jaeger-collector:14268"</span>\n        readinessProbe<span class="token punctuation">:</span>\n          periodSeconds<span class="token punctuation">:</span> <span class="token number">5</span>\n          exec<span class="token punctuation">:</span>\n            command<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"/bin/grpc_health_probe"</span><span class="token punctuation">,</span> <span class="token string">"-addr=:50051"</span><span class="token punctuation">]</span>\n        livenessProbe<span class="token punctuation">:</span>\n          exec<span class="token punctuation">:</span>\n            command<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"/bin/grpc_health_probe"</span><span class="token punctuation">,</span> <span class="token string">"-addr=:50051"</span><span class="token punctuation">]</span>\n        resources<span class="token punctuation">:</span>\n          requests<span class="token punctuation">:</span>\n            cpu<span class="token punctuation">:</span> 100m\n            memory<span class="token punctuation">:</span> 64Mi\n          limits<span class="token punctuation">:</span>\n            cpu<span class="token punctuation">:</span> 200m\n            memory<span class="token punctuation">:</span> 128Mi\n<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>\napiVersion<span class="token punctuation">:</span> v1\nkind<span class="token punctuation">:</span> Service\nmetadata<span class="token punctuation">:</span>\n  name<span class="token punctuation">:</span> shippingservice\nspec<span class="token punctuation">:</span>\n  type<span class="token punctuation">:</span> ClusterIP\n  selector<span class="token punctuation">:</span>\n    app<span class="token punctuation">:</span> shippingservice\n  ports<span class="token punctuation">:</span>\n  <span class="token operator">-</span> name<span class="token punctuation">:</span> grpc\n    port<span class="token punctuation">:</span> <span class="token number">50051</span>\n    targetPort<span class="token punctuation">:</span> <span class="token number">50051</span>\n<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>\napiVersion<span class="token punctuation">:</span> apps<span class="token operator">/</span>v1\nkind<span class="token punctuation">:</span> Deployment\nmetadata<span class="token punctuation">:</span>\n  name<span class="token punctuation">:</span> redis<span class="token operator">-</span>cart\nspec<span class="token punctuation">:</span>\n  selector<span class="token punctuation">:</span>\n    matchLabels<span class="token punctuation">:</span>\n      app<span class="token punctuation">:</span> redis<span class="token operator">-</span>cart\n  template<span class="token punctuation">:</span>\n    metadata<span class="token punctuation">:</span>\n      labels<span class="token punctuation">:</span>\n        app<span class="token punctuation">:</span> redis<span class="token operator">-</span>cart\n    spec<span class="token punctuation">:</span>\n      containers<span class="token punctuation">:</span>\n      <span class="token operator">-</span> name<span class="token punctuation">:</span> redis\n        image<span class="token punctuation">:</span> redis<span class="token punctuation">:</span>alpine\n        ports<span class="token punctuation">:</span>\n        <span class="token operator">-</span> containerPort<span class="token punctuation">:</span> <span class="token number">6379</span>\n        readinessProbe<span class="token punctuation">:</span>\n          periodSeconds<span class="token punctuation">:</span> <span class="token number">5</span>\n          tcpSocket<span class="token punctuation">:</span>\n            port<span class="token punctuation">:</span> <span class="token number">6379</span>\n        livenessProbe<span class="token punctuation">:</span>\n          periodSeconds<span class="token punctuation">:</span> <span class="token number">5</span>\n          tcpSocket<span class="token punctuation">:</span>\n            port<span class="token punctuation">:</span> <span class="token number">6379</span>\n        volumeMounts<span class="token punctuation">:</span>\n        <span class="token operator">-</span> mountPath<span class="token punctuation">:</span> <span class="token operator">/</span>data\n          name<span class="token punctuation">:</span> redis<span class="token operator">-</span>data\n        resources<span class="token punctuation">:</span>\n          limits<span class="token punctuation">:</span>\n            memory<span class="token punctuation">:</span> 256Mi\n            cpu<span class="token punctuation">:</span> 125m\n          requests<span class="token punctuation">:</span>\n            cpu<span class="token punctuation">:</span> 70m\n            memory<span class="token punctuation">:</span> 200Mi\n      volumes<span class="token punctuation">:</span>\n      <span class="token operator">-</span> name<span class="token punctuation">:</span> redis<span class="token operator">-</span>data\n        emptyDir<span class="token punctuation">:</span> {}\n<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>\napiVersion<span class="token punctuation">:</span> v1\nkind<span class="token punctuation">:</span> Service\nmetadata<span class="token punctuation">:</span>\n  name<span class="token punctuation">:</span> redis<span class="token operator">-</span>cart\nspec<span class="token punctuation">:</span>\n  type<span class="token punctuation">:</span> ClusterIP\n  selector<span class="token punctuation">:</span>\n    app<span class="token punctuation">:</span> redis<span class="token operator">-</span>cart\n  ports<span class="token punctuation">:</span>\n  <span class="token operator">-</span> name<span class="token punctuation">:</span> redis\n    port<span class="token punctuation">:</span> <span class="token number">6379</span>\n    targetPort<span class="token punctuation">:</span> <span class="token number">6379</span>\n<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>\napiVersion<span class="token punctuation">:</span> apps<span class="token operator">/</span>v1\nkind<span class="token punctuation">:</span> Deployment\nmetadata<span class="token punctuation">:</span>\n  name<span class="token punctuation">:</span> adservice\nspec<span class="token punctuation">:</span>\n  selector<span class="token punctuation">:</span>\n    matchLabels<span class="token punctuation">:</span>\n      app<span class="token punctuation">:</span> adservice\n  template<span class="token punctuation">:</span>\n    metadata<span class="token punctuation">:</span>\n      labels<span class="token punctuation">:</span>\n        app<span class="token punctuation">:</span> adservice\n    spec<span class="token punctuation">:</span>\n      terminationGracePeriodSeconds<span class="token punctuation">:</span> <span class="token number">5</span>\n      containers<span class="token punctuation">:</span>\n      <span class="token operator">-</span> name<span class="token punctuation">:</span> server\n        image<span class="token punctuation">:</span> gcr<span class="token punctuation">.</span>azk8s<span class="token punctuation">.</span>cn<span class="token operator">/</span>google<span class="token operator">-</span>samples<span class="token operator">/</span>microservices<span class="token operator">-</span>demo<span class="token operator">/</span>adservice<span class="token punctuation">:</span>v0<span class="token punctuation">.</span><span class="token number">1.4</span>\n        ports<span class="token punctuation">:</span>\n        <span class="token operator">-</span> containerPort<span class="token punctuation">:</span> <span class="token number">9555</span>\n        env<span class="token punctuation">:</span>\n        <span class="token operator">-</span> name<span class="token punctuation">:</span> PORT\n          value<span class="token punctuation">:</span> <span class="token string">"9555"</span>\n        # <span class="token operator">-</span> name<span class="token punctuation">:</span> DISABLE_STATS\n        #   value<span class="token punctuation">:</span> <span class="token string">"1"</span>\n        # <span class="token operator">-</span> name<span class="token punctuation">:</span> DISABLE_TRACING\n        #   value<span class="token punctuation">:</span> <span class="token string">"1"</span>\n        #<span class="token operator">-</span> name<span class="token punctuation">:</span> JAEGER_SERVICE_ADDR\n        #  value<span class="token punctuation">:</span> <span class="token string">"jaeger-collector:14268"</span>\n        resources<span class="token punctuation">:</span>\n          requests<span class="token punctuation">:</span>\n            cpu<span class="token punctuation">:</span> 200m\n            memory<span class="token punctuation">:</span> 180Mi\n          limits<span class="token punctuation">:</span>\n            cpu<span class="token punctuation">:</span> 300m\n            memory<span class="token punctuation">:</span> 300Mi\n        readinessProbe<span class="token punctuation">:</span>\n          initialDelaySeconds<span class="token punctuation">:</span> <span class="token number">20</span>\n          periodSeconds<span class="token punctuation">:</span> <span class="token number">15</span>\n          exec<span class="token punctuation">:</span>\n            command<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"/bin/grpc_health_probe"</span><span class="token punctuation">,</span> <span class="token string">"-addr=:9555"</span><span class="token punctuation">]</span>\n        livenessProbe<span class="token punctuation">:</span>\n          initialDelaySeconds<span class="token punctuation">:</span> <span class="token number">20</span>\n          periodSeconds<span class="token punctuation">:</span> <span class="token number">15</span>\n          exec<span class="token punctuation">:</span>\n            command<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"/bin/grpc_health_probe"</span><span class="token punctuation">,</span> <span class="token string">"-addr=:9555"</span><span class="token punctuation">]</span>\n<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>\napiVersion<span class="token punctuation">:</span> v1\nkind<span class="token punctuation">:</span> Service\nmetadata<span class="token punctuation">:</span>\n  name<span class="token punctuation">:</span> adservice\nspec<span class="token punctuation">:</span>\n  type<span class="token punctuation">:</span> ClusterIP\n  selector<span class="token punctuation">:</span>\n    app<span class="token punctuation">:</span> adservice\n  ports<span class="token punctuation">:</span>\n  <span class="token operator">-</span> name<span class="token punctuation">:</span> grpc\n    port<span class="token punctuation">:</span> <span class="token number">9555</span>\n    targetPort<span class="token punctuation">:</span> <span class="token number">9555</span>\n<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>'},["code",'# Copyright 2018 Google LLC\n#\n# Licensed under the Apache License, Version 2.0 (the "License");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#      http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an "AS IS" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n\n# ----------------------------------------------------------\n# WARNING: This file is autogenerated. Do not manually edit.\n# ----------------------------------------------------------\n\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: emailservice\nspec:\n  selector:\n    matchLabels:\n      app: emailservice\n  template:\n    metadata:\n      labels:\n        app: emailservice\n    spec:\n      terminationGracePeriodSeconds: 5\n      containers:\n      - name: server\n        image: gcr.azk8s.cn/google-samples/microservices-demo/emailservice:v0.1.4\n        ports:\n        - containerPort: 8080\n        env:\n        - name: PORT\n          value: "8080"\n        # - name: DISABLE_TRACING\n        #   value: "1"\n        - name: DISABLE_PROFILER\n          value: "1"\n        readinessProbe:\n          periodSeconds: 5\n          exec:\n            command: ["/bin/grpc_health_probe", "-addr=:8080"]\n        livenessProbe:\n          periodSeconds: 5\n          exec:\n            command: ["/bin/grpc_health_probe", "-addr=:8080"]\n        resources:\n          requests:\n            cpu: 100m\n            memory: 64Mi\n          limits:\n            cpu: 200m\n            memory: 128Mi\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: emailservice\nspec:\n  type: ClusterIP\n  selector:\n    app: emailservice\n  ports:\n  - name: grpc\n    port: 5000\n    targetPort: 8080\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: checkoutservice\nspec:\n  selector:\n    matchLabels:\n      app: checkoutservice\n  template:\n    metadata:\n      labels:\n        app: checkoutservice\n    spec:\n      containers:\n        - name: server\n          image: gcr.azk8s.cn/google-samples/microservices-demo/checkoutservice:v0.1.4\n          ports:\n          - containerPort: 5050\n          readinessProbe:\n            exec:\n              command: ["/bin/grpc_health_probe", "-addr=:5050"]\n          livenessProbe:\n            exec:\n              command: ["/bin/grpc_health_probe", "-addr=:5050"]\n          env:\n          - name: PORT\n            value: "5050"\n          - name: PRODUCT_CATALOG_SERVICE_ADDR\n            value: "productcatalogservice:3550"\n          - name: SHIPPING_SERVICE_ADDR\n            value: "shippingservice:50051"\n          - name: PAYMENT_SERVICE_ADDR\n            value: "paymentservice:50051"\n          - name: EMAIL_SERVICE_ADDR\n            value: "emailservice:5000"\n          - name: CURRENCY_SERVICE_ADDR\n            value: "currencyservice:7000"\n          - name: CART_SERVICE_ADDR\n            value: "cartservice:7070"\n          # - name: DISABLE_STATS\n          #   value: "1"\n          # - name: DISABLE_TRACING\n          #   value: "1"\n          # - name: DISABLE_PROFILER\n          #   value: "1"\n          # - name: JAEGER_SERVICE_ADDR\n          #   value: "jaeger-collector:14268"\n          resources:\n            requests:\n              cpu: 100m\n              memory: 64Mi\n            limits:\n              cpu: 200m\n              memory: 128Mi\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: checkoutservice\nspec:\n  type: ClusterIP\n  selector:\n    app: checkoutservice\n  ports:\n  - name: grpc\n    port: 5050\n    targetPort: 5050\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: recommendationservice\nspec:\n  selector:\n    matchLabels:\n      app: recommendationservice\n  template:\n    metadata:\n      labels:\n        app: recommendationservice\n    spec:\n      terminationGracePeriodSeconds: 5\n      containers:\n      - name: server\n        image: gcr.azk8s.cn/google-samples/microservices-demo/recommendationservice:v0.1.4\n        ports:\n        - containerPort: 8080\n        readinessProbe:\n          periodSeconds: 5\n          exec:\n            command: ["/bin/grpc_health_probe", "-addr=:8080"]\n        livenessProbe:\n          periodSeconds: 5\n          exec:\n            command: ["/bin/grpc_health_probe", "-addr=:8080"]\n        env:\n        - name: PORT\n          value: "8080"\n        - name: PRODUCT_CATALOG_SERVICE_ADDR\n          value: "productcatalogservice:3550"\n        - name: DISABLE_TRACING\n          value: "1"\n        # - name: DISABLE_PROFILER\n        #   value: "1"\n        # - name: DISABLE_DEBUGGER\n        #   value: "1"\n        resources:\n          requests:\n            cpu: 100m\n            memory: 220Mi\n          limits:\n            cpu: 200m\n            memory: 450Mi\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: recommendationservice\nspec:\n  type: ClusterIP\n  selector:\n    app: recommendationservice\n  ports:\n  - name: grpc\n    port: 8080\n    targetPort: 8080\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: frontend\nspec:\n  selector:\n    matchLabels:\n      app: frontend\n  template:\n    metadata:\n      labels:\n        app: frontend\n      annotations:\n        sidecar.istio.io/rewriteAppHTTPProbers: "true"\n    spec:\n      containers:\n        - name: server\n          image: gcr.azk8s.cn/google-samples/microservices-demo/frontend:v0.1.4\n          ports:\n          - containerPort: 8080\n          readinessProbe:\n            initialDelaySeconds: 10\n            httpGet:\n              path: "/_healthz"\n              port: 8080\n              httpHeaders:\n              - name: "Cookie"\n                value: "shop_session-id=x-readiness-probe"\n          livenessProbe:\n            initialDelaySeconds: 10\n            httpGet:\n              path: "/_healthz"\n              port: 8080\n              httpHeaders:\n              - name: "Cookie"\n                value: "shop_session-id=x-liveness-probe"\n          env:\n          - name: PORT\n            value: "8080"\n          - name: PRODUCT_CATALOG_SERVICE_ADDR\n            value: "productcatalogservice:3550"\n          - name: CURRENCY_SERVICE_ADDR\n            value: "currencyservice:7000"\n          - name: CART_SERVICE_ADDR\n            value: "cartservice:7070"\n          - name: RECOMMENDATION_SERVICE_ADDR\n            value: "recommendationservice:8080"\n          - name: SHIPPING_SERVICE_ADDR\n            value: "shippingservice:50051"\n          - name: CHECKOUT_SERVICE_ADDR\n            value: "checkoutservice:5050"\n          - name: AD_SERVICE_ADDR\n            value: "adservice:9555"\n          - name: DISABLE_TRACING\n            value: "1"\n          # - name: DISABLE_PROFILER\n          #   value: "1"\n          # - name: JAEGER_SERVICE_ADDR\n          #   value: "jaeger-collector:14268"\n          resources:\n            requests:\n              cpu: 100m\n              memory: 64Mi\n            limits:\n              cpu: 200m\n              memory: 128Mi\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: frontend\nspec:\n  type: ClusterIP\n  selector:\n    app: frontend\n  ports:\n  - name: http\n    port: 80\n    targetPort: 8080\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: frontend-external\nspec:\n  type: LoadBalancer\n  selector:\n    app: frontend\n  ports:\n  - name: http\n    port: 80\n    targetPort: 8080\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: paymentservice\nspec:\n  selector:\n    matchLabels:\n      app: paymentservice\n  template:\n    metadata:\n      labels:\n        app: paymentservice\n    spec:\n      terminationGracePeriodSeconds: 5\n      containers:\n      - name: server\n        image: gcr.azk8s.cn/google-samples/microservices-demo/paymentservice:v0.1.4\n        ports:\n        - containerPort: 50051\n        env:\n        - name: PORT\n          value: "50051"\n        readinessProbe:\n          exec:\n            command: ["/bin/grpc_health_probe", "-addr=:50051"]\n        livenessProbe:\n          exec:\n            command: ["/bin/grpc_health_probe", "-addr=:50051"]\n        resources:\n          requests:\n            cpu: 100m\n            memory: 64Mi\n          limits:\n            cpu: 200m\n            memory: 128Mi\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: paymentservice\nspec:\n  type: ClusterIP\n  selector:\n    app: paymentservice\n  ports:\n  - name: grpc\n    port: 50051\n    targetPort: 50051\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: productcatalogservice\nspec:\n  selector:\n    matchLabels:\n      app: productcatalogservice\n  template:\n    metadata:\n      labels:\n        app: productcatalogservice\n    spec:\n      terminationGracePeriodSeconds: 5\n      containers:\n      - name: server\n        image: gcr.azk8s.cn/google-samples/microservices-demo/productcatalogservice:v0.1.4\n        ports:\n        - containerPort: 3550\n        env:\n        - name: PORT\n          value: "3550"\n        # - name: DISABLE_STATS\n        #   value: "1"\n        # - name: DISABLE_TRACING\n        #   value: "1"\n        # - name: DISABLE_PROFILER\n        #   value: "1"\n        # - name: JAEGER_SERVICE_ADDR\n        #   value: "jaeger-collector:14268"\n        readinessProbe:\n          exec:\n            command: ["/bin/grpc_health_probe", "-addr=:3550"]\n        livenessProbe:\n          exec:\n            command: ["/bin/grpc_health_probe", "-addr=:3550"]\n        resources:\n          requests:\n            cpu: 100m\n            memory: 64Mi\n          limits:\n            cpu: 200m\n            memory: 128Mi\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: productcatalogservice\nspec:\n  type: ClusterIP\n  selector:\n    app: productcatalogservice\n  ports:\n  - name: grpc\n    port: 3550\n    targetPort: 3550\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: cartservice\nspec:\n  selector:\n    matchLabels:\n      app: cartservice\n  template:\n    metadata:\n      labels:\n        app: cartservice\n    spec:\n      terminationGracePeriodSeconds: 5\n      containers:\n      - name: server\n        image: gcr.azk8s.cn/google-samples/microservices-demo/cartservice:v0.1.4\n        ports:\n        - containerPort: 7070\n        env:\n        - name: REDIS_ADDR\n          value: "redis-cart:6379"\n        - name: PORT\n          value: "7070"\n        - name: LISTEN_ADDR\n          value: "0.0.0.0"\n        resources:\n          requests:\n            cpu: 200m\n            memory: 64Mi\n          limits:\n            cpu: 300m\n            memory: 128Mi\n        readinessProbe:\n          initialDelaySeconds: 15\n          exec:\n            command: ["/bin/grpc_health_probe", "-addr=:7070", "-rpc-timeout=5s"]\n        livenessProbe:\n          initialDelaySeconds: 15\n          periodSeconds: 10\n          exec:\n            command: ["/bin/grpc_health_probe", "-addr=:7070", "-rpc-timeout=5s"]\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: cartservice\nspec:\n  type: ClusterIP\n  selector:\n    app: cartservice\n  ports:\n  - name: grpc\n    port: 7070\n    targetPort: 7070\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: loadgenerator\nspec:\n  selector:\n    matchLabels:\n      app: loadgenerator\n  replicas: 1\n  template:\n    metadata:\n      labels:\n        app: loadgenerator\n      annotations:\n        sidecar.istio.io/rewriteAppHTTPProbers: "true"\n    spec:\n      terminationGracePeriodSeconds: 5\n      restartPolicy: Always\n      containers:\n      - name: main\n        image: gcr.azk8s.cn/google-samples/microservices-demo/loadgenerator:v0.1.4\n        env:\n        - name: FRONTEND_ADDR\n          value: "frontend:80"\n        - name: USERS\n          value: "10"\n        resources:\n          requests:\n            cpu: 300m\n            memory: 256Mi\n          limits:\n            cpu: 500m\n            memory: 512Mi\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: currencyservice\nspec:\n  selector:\n    matchLabels:\n      app: currencyservice\n  template:\n    metadata:\n      labels:\n        app: currencyservice\n    spec:\n      terminationGracePeriodSeconds: 5\n      containers:\n      - name: server\n        image: gcr.azk8s.cn/google-samples/microservices-demo/currencyservice:v0.1.4\n        ports:\n        - name: grpc\n          containerPort: 7000\n        env:\n        - name: PORT\n          value: "7000"\n        # - name: DISABLE_TRACING\n        #   value: "1"\n        # - name: DISABLE_PROFILER\n        #   value: "1"\n        # - name: DISABLE_DEBUGGER\n        #   value: "1"\n        readinessProbe:\n          exec:\n            command: ["/bin/grpc_health_probe", "-addr=:7000"]\n        livenessProbe:\n          exec:\n            command: ["/bin/grpc_health_probe", "-addr=:7000"]\n        resources:\n          requests:\n            cpu: 100m\n            memory: 64Mi\n          limits:\n            cpu: 200m\n            memory: 128Mi\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: currencyservice\nspec:\n  type: ClusterIP\n  selector:\n    app: currencyservice\n  ports:\n  - name: grpc\n    port: 7000\n    targetPort: 7000\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: shippingservice\nspec:\n  selector:\n    matchLabels:\n      app: shippingservice\n  template:\n    metadata:\n      labels:\n        app: shippingservice\n    spec:\n      containers:\n      - name: server\n        image: gcr.azk8s.cn/google-samples/microservices-demo/shippingservice:v0.1.4\n        ports:\n        - containerPort: 50051\n        env:\n        - name: PORT\n          value: "50051"\n        # - name: DISABLE_STATS\n        #   value: "1"\n        # - name: DISABLE_TRACING\n        #   value: "1"\n        # - name: DISABLE_PROFILER\n        #   value: "1"\n        # - name: JAEGER_SERVICE_ADDR\n        #   value: "jaeger-collector:14268"\n        readinessProbe:\n          periodSeconds: 5\n          exec:\n            command: ["/bin/grpc_health_probe", "-addr=:50051"]\n        livenessProbe:\n          exec:\n            command: ["/bin/grpc_health_probe", "-addr=:50051"]\n        resources:\n          requests:\n            cpu: 100m\n            memory: 64Mi\n          limits:\n            cpu: 200m\n            memory: 128Mi\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: shippingservice\nspec:\n  type: ClusterIP\n  selector:\n    app: shippingservice\n  ports:\n  - name: grpc\n    port: 50051\n    targetPort: 50051\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: redis-cart\nspec:\n  selector:\n    matchLabels:\n      app: redis-cart\n  template:\n    metadata:\n      labels:\n        app: redis-cart\n    spec:\n      containers:\n      - name: redis\n        image: redis:alpine\n        ports:\n        - containerPort: 6379\n        readinessProbe:\n          periodSeconds: 5\n          tcpSocket:\n            port: 6379\n        livenessProbe:\n          periodSeconds: 5\n          tcpSocket:\n            port: 6379\n        volumeMounts:\n        - mountPath: /data\n          name: redis-data\n        resources:\n          limits:\n            memory: 256Mi\n            cpu: 125m\n          requests:\n            cpu: 70m\n            memory: 200Mi\n      volumes:\n      - name: redis-data\n        emptyDir: {}\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: redis-cart\nspec:\n  type: ClusterIP\n  selector:\n    app: redis-cart\n  ports:\n  - name: redis\n    port: 6379\n    targetPort: 6379\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: adservice\nspec:\n  selector:\n    matchLabels:\n      app: adservice\n  template:\n    metadata:\n      labels:\n        app: adservice\n    spec:\n      terminationGracePeriodSeconds: 5\n      containers:\n      - name: server\n        image: gcr.azk8s.cn/google-samples/microservices-demo/adservice:v0.1.4\n        ports:\n        - containerPort: 9555\n        env:\n        - name: PORT\n          value: "9555"\n        # - name: DISABLE_STATS\n        #   value: "1"\n        # - name: DISABLE_TRACING\n        #   value: "1"\n        #- name: JAEGER_SERVICE_ADDR\n        #  value: "jaeger-collector:14268"\n        resources:\n          requests:\n            cpu: 200m\n            memory: 180Mi\n          limits:\n            cpu: 300m\n            memory: 300Mi\n        readinessProbe:\n          initialDelaySeconds: 20\n          periodSeconds: 15\n          exec:\n            command: ["/bin/grpc_health_probe", "-addr=:9555"]\n        livenessProbe:\n          initialDelaySeconds: 20\n          periodSeconds: 15\n          exec:\n            command: ["/bin/grpc_health_probe", "-addr=:9555"]\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: adservice\nspec:\n  type: ClusterIP\n  selector:\n    app: adservice\n  ports:\n  - name: grpc\n    port: 9555\n    targetPort: 9555\n---']],["p",["code","istioctl dashboard kiali"],"  \u68c0\u9a8c\u90e8\u7f72\u60c5\u51b5"],["p",["img",{title:null,src:"./assets/istio-kiali.png",alt:"istio kiali dashboard"}]],["p",["code","istioctl dashboard grafana"],"  \u68c0\u9a8c\u90e8\u7f72\u60c5\u51b5\n",["img",{title:null,src:"./assets/istio-grafana.png",alt:"istio grafana dashboard"}]]],meta:{order:9,title:"Istio \u5165\u95e8",type:"\u5165\u95e8",filename:"docs/distribution/istio.zh-CN.md"},toc:["ul",["li",["a",{className:"bisheng-toc-h2",href:"#\u5b89\u88c5",title:"\u5b89\u88c5"},"\u5b89\u88c5"]]]}}});